var pe=Object.create,$=Object.defineProperty,ge=Object.getPrototypeOf,me=Object.prototype.hasOwnProperty,fe=Object.getOwnPropertyNames,he=Object.getOwnPropertyDescriptor;var j=l=>$(l,"__esModule",{value:!0});var be=(l,e)=>{for(var a in e)$(l,a,{get:e[a],enumerable:!0})},ye=(l,e,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of fe(e))!me.call(l,t)&&t!=="default"&&$(l,t,{get:()=>e[t],enumerable:!(a=he(e,t))||a.enumerable});return l},L=l=>ye(j($(l!=null?pe(ge(l)):{},"default",l&&l.__esModule&&"default"in l?{get:()=>l.default,enumerable:!0}:{value:l,enumerable:!0})),l);j(exports);be(exports,{NotelertPlugin:()=>U,default:()=>we});var de=L(require("obsidian"));var k="c7e9a30b62db94f5b8478619c98953a03474c072d31a25ee3e00e213f918ed9c",O="https://us-central1-notalert-2a44a.cloudfunctions.net";var V={autoProcess:!1,processOnSave:!1,processOnOpen:!1,debugMode:!1,language:"es",customPatterns:[],excludedFolders:["Templates","Archive","Trash"],debounceDelay:3e3,useDebounce:!1,showConfirmationModal:!1,addVisualIndicators:!1,visualIndicatorIcon:"\u23F0",useNewSyntax:!0,enableDatePicker:!0,savedLocations:[{name:"Casa",latitude:0,longitude:0,radius:100},{name:"Trabajo",latitude:0,longitude:0,radius:100},{name:"Supermercado",latitude:0,longitude:0,radius:200}],geocodingProvider:"google",googleMapsApiKey:"",useFirebaseProxy:!1,firebaseGeocodingUrl:"",mapboxApiKey:"",locationiqApiKey:"",opencageApiKey:"",algoliaApiKey:"",algoliaAppId:"",userEmail:"",notelertApiKey:k,scheduledEmails:[]};var x=L(require("obsidian"));var J=[{code:"es",name:"Spanish",nativeName:"Espa\xF1ol",keywords:["Recordar:","Notificar:","Alerta:","Recordatorio:","Aviso:","Reminder:","Notify:","Alert:"],datePatterns:{today:["hoy"],tomorrow:["ma\xF1ana"],yesterday:["ayer"]},timePatterns:{format24h:["HH:MM","H:MM"],format12h:["HH:MM AM/PM","H:MM AM/PM"]}},{code:"ca",name:"Catalan",nativeName:"Catal\xE0",keywords:["Recordar:","Notificar:","Alerta:","Recordatori:","Av\xEDs:","Reminder:","Notify:","Alert:"],datePatterns:{today:["avui"],tomorrow:["dem\xE0"],yesterday:["ahir"]},timePatterns:{format24h:["HH:MM","H:MM"],format12h:["HH:MM AM/PM","H:MM AM/PM"]}},{code:"en",name:"English",nativeName:"English",keywords:["Remember:","Notify:","Alert:","Reminder:","Notice:","Remind:","Alert:","Warning:"],datePatterns:{today:["today"],tomorrow:["tomorrow"],yesterday:["yesterday"]},timePatterns:{format24h:["HH:MM","H:MM"],format12h:["HH:MM AM/PM","H:MM AM/PM"]}},{code:"fr",name:"French",nativeName:"Fran\xE7ais",keywords:["Rappeler:","Notifier:","Alerte:","Rappel:","Avis:","Reminder:","Notify:","Alert:"],datePatterns:{today:["aujourd'hui","aujourd hui"],tomorrow:["demain"],yesterday:["hier"]},timePatterns:{format24h:["HH:MM","H:MM"],format12h:["HH:MM AM/PM","H:MM AM/PM"]}},{code:"de",name:"German",nativeName:"Deutsch",keywords:["Erinnern:","Benachrichtigen:","Alarm:","Erinnerung:","Hinweis:","Reminder:","Notify:","Alert:"],datePatterns:{today:["heute"],tomorrow:["morgen"],yesterday:["gestern"]},timePatterns:{format24h:["HH:MM","H:MM"],format12h:["HH:MM AM/PM","H:MM AM/PM"]}},{code:"it",name:"Italian",nativeName:"Italiano",keywords:["Ricordare:","Notificare:","Allerta:","Promemoria:","Avviso:","Reminder:","Notify:","Alert:"],datePatterns:{today:["oggi"],tomorrow:["domani"],yesterday:["ieri"]},timePatterns:{format24h:["HH:MM","H:MM"],format12h:["HH:MM AM/PM","H:MM AM/PM"]}},{code:"pt",name:"Portuguese",nativeName:"Portugu\xEAs",keywords:["Lembrar:","Notificar:","Alerta:","Lembrete:","Aviso:","Reminder:","Notify:","Alert:"],datePatterns:{today:["hoje"],tomorrow:["amanh\xE3","amanha"],yesterday:["ontem"]},timePatterns:{format24h:["HH:MM","H:MM"],format12h:["HH:MM AM/PM","H:MM AM/PM"]}},{code:"ru",name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",keywords:["\u041D\u0430\u043F\u043E\u043C\u043D\u0438\u0442\u044C:","\u0423\u0432\u0435\u0434\u043E\u043C\u0438\u0442\u044C:","\u0422\u0440\u0435\u0432\u043E\u0433\u0430:","\u041D\u0430\u043F\u043E\u043C\u0438\u043D\u0430\u043D\u0438\u0435:","\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435:","Reminder:","Notify:","Alert:"],datePatterns:{today:["\u0441\u0435\u0433\u043E\u0434\u043D\u044F"],tomorrow:["\u0437\u0430\u0432\u0442\u0440\u0430"],yesterday:["\u0432\u0447\u0435\u0440\u0430"]},timePatterns:{format24h:["HH:MM","H:MM"],format12h:["HH:MM AM/PM","H:MM AM/PM"]}},{code:"ja",name:"Japanese",nativeName:"\u65E5\u672C\u8A9E",keywords:["\u899A\u3048\u3066:","\u901A\u77E5:","\u30A2\u30E9\u30FC\u30C8:","\u30EA\u30DE\u30A4\u30F3\u30C0\u30FC:","\u304A\u77E5\u3089\u305B:","Reminder:","Notify:","Alert:"],datePatterns:{today:["\u4ECA\u65E5","\u304D\u3087\u3046"],tomorrow:["\u660E\u65E5","\u3042\u3057\u305F"],yesterday:["\u6628\u65E5","\u304D\u306E\u3046"]},timePatterns:{format24h:["HH:MM","H:MM"],format12h:["HH:MM AM/PM","H:MM AM/PM"]}},{code:"zh",name:"Chinese",nativeName:"\u4E2D\u6587",keywords:["\u8BB0\u4F4F:","\u901A\u77E5:","\u8B66\u62A5:","\u63D0\u9192:","\u6CE8\u610F:","Reminder:","Notify:","Alert:"],datePatterns:{today:["\u4ECA\u5929"],tomorrow:["\u660E\u5929"],yesterday:["\u6628\u5929"]},timePatterns:{format24h:["HH:MM","H:MM"],format12h:["HH:MM AM/PM","H:MM AM/PM"]}},{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",keywords:["\u062A\u0630\u0643\u0631:","\u0625\u0634\u0639\u0627\u0631:","\u062A\u0646\u0628\u064A\u0647:","\u062A\u0630\u0643\u064A\u0631:","\u062A\u0646\u0628\u064A\u0647:","Reminder:","Notify:","Alert:"],datePatterns:{today:["\u0627\u0644\u064A\u0648\u0645"],tomorrow:["\u063A\u062F\u0627\u064B","\u063A\u062F\u0627"],yesterday:["\u0623\u0645\u0633"]},timePatterns:{format24h:["HH:MM","H:MM"],format12h:["HH:MM AM/PM","H:MM AM/PM"]}}],Q={es:{settings:{title:"Configuraci\xF3n de Notelert",autoProcess:"Procesamiento autom\xE1tico",autoProcessDesc:"Activar el procesamiento autom\xE1tico de patrones",processOnSave:"Procesar al guardar",processOnSaveDesc:"Procesar autom\xE1ticamente cuando se guarda una nota",processOnOpen:"Procesar al abrir",processOnOpenDesc:"Procesar autom\xE1ticamente cuando se abre una nota",debugMode:"Modo debug",debugModeDesc:"Mostrar mensajes de debug en la consola",language:"Idioma",languageDesc:"Seleccionar idioma para detecci\xF3n de patrones",excludedFolders:"Carpetas excluidas",excludedFoldersDesc:"Carpetas que no se procesar\xE1n (separadas por comas)",customPatterns:"Palabras clave personalizadas",customPatternsDesc:"Palabras que activan el procesamiento (separadas por comas)",useDebounce:"Usar retraso inteligente",useDebounceDesc:"Esperar a que termines de escribir antes de procesar (evita notificaciones duplicadas)",debounceDelay:"Tiempo de espera (segundos)",debounceDelayDesc:"Tiempo a esperar despu\xE9s del \xFAltimo cambio antes de procesar",showConfirmationModal:"Mostrar modal de confirmaci\xF3n",showConfirmationModalDesc:"Preguntar antes de crear cada notificaci\xF3n",addVisualIndicators:"A\xF1adir iconos visuales",addVisualIndicatorsDesc:"A\xF1adir iconos a los recordatorios procesados para identificarlos visualmente",visualIndicatorIcon:"Icono visual",visualIndicatorIconDesc:"Icono a a\xF1adir al final de los recordatorios procesados",useNewSyntax:"Usar nuevo sistema",useNewSyntaxDesc:"Usar el nuevo formato :@fecha, hora en lugar del sistema anterior",enableDatePicker:"Activar date picker",enableDatePickerDesc:"Abrir autom\xE1ticamente el selector de fecha al escribir :@",supportedPatterns:"Patrones Soportados",keywords:"Palabras clave",dates:"Fechas:",times:"Horas:",examples:"Ejemplos:"},commands:{processCurrentNote:"Procesar nota actual para Notelert",processAllNotes:"Procesar todas las notas para Notelert",clearProcessedHistory:"Limpiar historial de procesamiento"},notices:{noActiveNote:"No hay ninguna nota abierta para procesar",processedNotes:"Procesadas {count} notas para Notelert",processedNote:"Procesada: {filename} ({count} notificaciones)",clearedHistory:"Historial de procesamiento limpiado",errorCreatingNotification:"Error creando notificaci\xF3n: {title}",defaultTitle:"Recordatorio",desktopConfigRequired:"\u274C Configura tu email y API Key en Settings para usar Notelert en desktop",locationNotSupportedDesktop:"\u274C Las notificaciones de ubicaci\xF3n solo est\xE1n disponibles en m\xF3vil",emailScheduled:"\u2705 Email programado correctamente"},modal:{title:"\xBFCrear notificaci\xF3n en Notelert?",titleLabel:"T\xEDtulo:",dateLabel:"Fecha:",timeLabel:"Hora:",messageLabel:"Mensaje:",confirmButton:"S\xED, crear notificaci\xF3n",cancelButton:"Cancelar"},datePicker:{title:"Seleccionar fecha y hora",dateLabel:"Fecha:",timeLabel:"Hora:",quickActions:"Acciones r\xE1pidas:",today:"Hoy",tomorrow:"Ma\xF1ana",in1Hour:"En 1 hora",in2Hours:"En 2 horas",confirmButton:"Confirmar notificaci\xF3n",cancelButton:"Cancelar",selectDateTime:"Por favor, selecciona una fecha y hora",notificationType:"Tipo de notificaci\xF3n:",timeNotification:"Tiempo",locationNotification:"Ubicaci\xF3n",noSavedLocations:"No hay ubicaciones guardadas. Ve a Settings para a\xF1adir ubicaciones.",selectSavedLocation:"Seleccionar Ubicaci\xF3n Guardada"},locationPicker:{title:"Seleccionar Ubicaci\xF3n",searchPlaceholder:"Buscar direcci\xF3n o lugar...",radius:"Radio (metros):",favorites:"Ubicaciones Favoritas",cancelButton:"Cancelar",confirmButton:"Confirmar",noFavorites:"No hay ubicaciones guardadas",selectButton:"Seleccionar",deleteButton:"Eliminar",saveFavorite:"\u2B50 Guardar",saved:"\u2713 Guardado",searching:"Buscando...",noResults:"No se encontraron resultados",error:"Error al buscar ubicaciones",connectionError:"Error de conexi\xF3n. Verifica tu conexi\xF3n a internet.",rateLimit:"Demasiadas solicitudes. Espera un momento antes de buscar de nuevo.",apiKeyError:"Error: API key no configurada o inv\xE1lida. Verifica la configuraci\xF3n.",selectLocation:"Selecciona una ubicaci\xF3n de los resultados o de tus favoritas",locationSelected:"Ubicaci\xF3n seleccionada",loadingMap:"Cargando mapa..."}},en:{settings:{title:"Notelert Settings",autoProcess:"Automatic processing",autoProcessDesc:"Enable automatic pattern processing",processOnSave:"Process on save",processOnSaveDesc:"Automatically process when saving a note",processOnOpen:"Process on open",processOnOpenDesc:"Automatically process when opening a note",debugMode:"Debug mode",debugModeDesc:"Show debug messages in console",language:"Language",languageDesc:"Select language for pattern detection",excludedFolders:"Excluded folders",excludedFoldersDesc:"Folders that will not be processed (comma separated)",customPatterns:"Custom keywords",customPatternsDesc:"Words that trigger processing (comma separated)",useDebounce:"Use smart delay",useDebounceDesc:"Wait for you to finish typing before processing (prevents duplicate notifications)",debounceDelay:"Wait time (seconds)",debounceDelayDesc:"Time to wait after last change before processing",showConfirmationModal:"Show confirmation modal",showConfirmationModalDesc:"Ask before creating each notification",addVisualIndicators:"Add visual indicators",addVisualIndicatorsDesc:"Add icons to processed reminders to identify them visually",visualIndicatorIcon:"Visual icon",visualIndicatorIconDesc:"Icon to add at the end of processed reminders",useNewSyntax:"Use new system",useNewSyntaxDesc:"Use the new :@date, time format instead of the previous system",enableDatePicker:"Enable date picker",enableDatePickerDesc:"Automatically open date selector when typing :@",supportedPatterns:"Supported Patterns",keywords:"Keywords",dates:"Dates:",times:"Times:",examples:"Examples:"},commands:{processCurrentNote:"Process current note for Notelert",processAllNotes:"Process all notes for Notelert",clearProcessedHistory:"Clear processing history"},notices:{noActiveNote:"No active note to process",processedNotes:"Processed {count} notes for Notelert",processedNote:"Processed: {filename} ({count} notifications)",clearedHistory:"Processing history cleared",errorCreatingNotification:"Error creating notification: {title}",defaultTitle:"Reminder",desktopConfigRequired:"\u274C Configure your email and API Key in Settings to use Notelert on desktop",locationNotSupportedDesktop:"\u274C Location notifications are only available on mobile",emailScheduled:"\u2705 Email scheduled successfully"},modal:{title:"Create notification in Notelert?",titleLabel:"Title:",dateLabel:"Date:",timeLabel:"Time:",messageLabel:"Message:",confirmButton:"Yes, create notification",cancelButton:"Cancel"},datePicker:{title:"Select date and time",dateLabel:"Date:",timeLabel:"Time:",quickActions:"Quick actions:",today:"Today",tomorrow:"Tomorrow",in1Hour:"In 1 hour",in2Hours:"In 2 hours",confirmButton:"Confirm notification",cancelButton:"Cancel",selectDateTime:"Please select a date and time",notificationType:"Notification type:",timeNotification:"Time",locationNotification:"Location",noSavedLocations:"No saved locations. Go to Settings to add locations.",selectSavedLocation:"Select Saved Location"},locationPicker:{title:"Select Location",searchPlaceholder:"Search address or place...",radius:"Radius (meters):",favorites:"Favorite Locations",cancelButton:"Cancel",confirmButton:"Confirm",noFavorites:"No saved locations",selectButton:"Select",deleteButton:"Delete",saveFavorite:"\u2B50 Save",saved:"\u2713 Saved",searching:"Searching...",noResults:"No results found",error:"Error searching locations",connectionError:"Connection error. Check your internet connection.",rateLimit:"Too many requests. Wait a moment before searching again.",apiKeyError:"Error: API key not configured or invalid. Check your settings.",selectLocation:"Select a location from results or your favorites",locationSelected:"Location selected",loadingMap:"Loading map..."}},ca:{settings:{title:"Configuraci\xF3 de Notelert",autoProcess:"Processament autom\xE0tic",autoProcessDesc:"Activar el processament autom\xE0tic de patrons",processOnSave:"Processar en desar",processOnSaveDesc:"Processar autom\xE0ticament quan es desa una nota",processOnOpen:"Processar en obrir",processOnOpenDesc:"Processar autom\xE0ticament quan s'obre una nota",debugMode:"Mode debug",debugModeDesc:"Mostrar missatges de debug a la consola",language:"Idioma",languageDesc:"Seleccionar idioma per a la detecci\xF3 de patrons",excludedFolders:"Carpetes excloses",excludedFoldersDesc:"Carpetes que no es processaran (separades per comes)",customPatterns:"Paraules clau personalitzades",customPatternsDesc:"Paraules que activen el processament (separades per comes)",useDebounce:"Usar retard intel\xB7ligent",useDebounceDesc:"Esperar que acabis d'escriure abans de processar (evita notificacions duplicades)",debounceDelay:"Temps d'espera (segons)",debounceDelayDesc:"Temps a esperar despr\xE9s del darrer canvi abans de processar",showConfirmationModal:"Mostrar modal de confirmaci\xF3",showConfirmationModalDesc:"Preguntar abans de crear cada notificaci\xF3",addVisualIndicators:"Afegir indicadors visuals",addVisualIndicatorsDesc:"Afegir icones als recordatoris processats per identificar-los visualment",visualIndicatorIcon:"Icona visual",visualIndicatorIconDesc:"Icona a afegir al final dels recordatoris processats",useNewSyntax:"Usar nou sistema",useNewSyntaxDesc:"Usar el nou format :@data, hora en lloc del sistema anterior",enableDatePicker:"Activar selector de data",enableDatePickerDesc:"Obrir autom\xE0ticament el selector de data en escriure :@",supportedPatterns:"Patrons Suportats",keywords:"Paraules clau",dates:"Dates:",times:"Hores:",examples:"Exemples:"},commands:{processCurrentNote:"Processar nota actual per a Notelert",processAllNotes:"Processar totes les notes per a Notelert",clearProcessedHistory:"Netejar historial de processament"},notices:{noActiveNote:"No hi ha cap nota oberta per processar",processedNotes:"Processades {count} notes per a Notelert",processedNote:"Processada: {filename} ({count} notificacions)",clearedHistory:"Historial de processament netejat",errorCreatingNotification:"Error creant notificaci\xF3: {title}",defaultTitle:"Recordatori",desktopConfigRequired:"\u274C Configura el teu email i API Key a Settings per usar Notelert a desktop",locationNotSupportedDesktop:"\u274C Les notificacions d'ubicaci\xF3 nom\xE9s estan disponibles a m\xF2bil",emailScheduled:"\u2705 Email programat correctament"},modal:{title:"Crear notificaci\xF3 a Notelert?",titleLabel:"T\xEDtol:",dateLabel:"Data:",timeLabel:"Hora:",messageLabel:"Missatge:",confirmButton:"S\xED, crear notificaci\xF3",cancelButton:"Cancel\xB7lar"},datePicker:{title:"Seleccionar data i hora",dateLabel:"Data:",timeLabel:"Hora:",quickActions:"Accions r\xE0pides:",today:"Avui",tomorrow:"Dem\xE0",in1Hour:"En 1 hora",in2Hours:"En 2 hores",confirmButton:"Confirmar notificaci\xF3",cancelButton:"Cancel\xB7lar",selectDateTime:"Si us plau, selecciona una data i hora",notificationType:"Tipus de notificaci\xF3:",timeNotification:"Temps",locationNotification:"Ubicaci\xF3",noSavedLocations:"No hi ha ubicacions guardades. Ves a Settings per afegir ubicacions.",selectSavedLocation:"Seleccionar Ubicaci\xF3 Guardada"},locationPicker:{title:"Seleccionar Ubicaci\xF3",searchPlaceholder:"Buscar adre\xE7a o lloc...",radius:"Radi (metres):",favorites:"Ubicacions Favorites",cancelButton:"Cancel\xB7lar",confirmButton:"Confirmar",noFavorites:"No hi ha ubicacions guardades",selectButton:"Seleccionar",deleteButton:"Eliminar",saveFavorite:"\u2B50 Guardar",saved:"\u2713 Guardat",searching:"Buscant...",noResults:"No s'han trobat resultats",error:"Error en buscar ubicacions",connectionError:"Error de connexi\xF3. Verifica la teva connexi\xF3 a internet.",rateLimit:"Massa sol\xB7licituds. Espera un moment abans de buscar de nou.",apiKeyError:"Error: API key no configurada o inv\xE0lida. Verifica la configuraci\xF3.",selectLocation:"Selecciona una ubicaci\xF3 dels resultats o de les teves favorites",locationSelected:"Ubicaci\xF3 seleccionada",loadingMap:"Carregant mapa..."}},fr:{settings:{title:"Param\xE8tres Notelert",autoProcess:"Traitement automatique",autoProcessDesc:"Activer le traitement automatique des motifs",processOnSave:"Traiter \xE0 la sauvegarde",processOnSaveDesc:"Traiter automatiquement lors de la sauvegarde d'une note",processOnOpen:"Traiter \xE0 l'ouverture",processOnOpenDesc:"Traiter automatiquement lors de l'ouverture d'une note",debugMode:"Mode debug",debugModeDesc:"Afficher les messages de debug dans la console",language:"Langue",languageDesc:"S\xE9lectionner la langue pour la d\xE9tection de motifs",excludedFolders:"Dossiers exclus",excludedFoldersDesc:"Dossiers qui ne seront pas trait\xE9s (s\xE9par\xE9s par des virgules)",customPatterns:"Mots-cl\xE9s personnalis\xE9s",customPatternsDesc:"Mots qui d\xE9clenchent le traitement (s\xE9par\xE9s par des virgules)",supportedPatterns:"Motifs Support\xE9s",keywords:"Mots-cl\xE9s",dates:"Dates:",times:"Heures:",examples:"Exemples:"},commands:{processCurrentNote:"Traiter la note actuelle pour Notelert",processAllNotes:"Traiter toutes les notes pour Notelert",clearProcessedHistory:"Effacer l'historique de traitement"},notices:{noActiveNote:"Aucune note active \xE0 traiter",processedNotes:"Trait\xE9es {count} notes pour Notelert",processedNote:"Trait\xE9: {filename} ({count} notifications)",clearedHistory:"Historique de traitement effac\xE9",errorCreatingNotification:"Erreur lors de la cr\xE9ation de la notification: {title}",defaultTitle:"Rappel"}},de:{settings:{title:"Notelert Einstellungen",autoProcess:"Automatische Verarbeitung",autoProcessDesc:"Automatische Musterverarbeitung aktivieren",processOnSave:"Beim Speichern verarbeiten",processOnSaveDesc:"Automatisch verarbeiten beim Speichern einer Notiz",processOnOpen:"Beim \xD6ffnen verarbeiten",processOnOpenDesc:"Automatisch verarbeiten beim \xD6ffnen einer Notiz",debugMode:"Debug-Modus",debugModeDesc:"Debug-Nachrichten in der Konsole anzeigen",language:"Sprache",languageDesc:"Sprache f\xFCr Mustererkennung ausw\xE4hlen",excludedFolders:"Ausgeschlossene Ordner",excludedFoldersDesc:"Ordner, die nicht verarbeitet werden (durch Kommas getrennt)",customPatterns:"Benutzerdefinierte Schl\xFCsselw\xF6rter",customPatternsDesc:"W\xF6rter, die die Verarbeitung ausl\xF6sen (durch Kommas getrennt)",supportedPatterns:"Unterst\xFCtzte Muster",keywords:"Schl\xFCsselw\xF6rter",dates:"Daten:",times:"Zeiten:",examples:"Beispiele:"},commands:{processCurrentNote:"Aktuelle Notiz f\xFCr Notelert verarbeiten",processAllNotes:"Alle Notizen f\xFCr Notelert verarbeiten",clearProcessedHistory:"Verarbeitungshistorie l\xF6schen"},notices:{noActiveNote:"Keine aktive Notiz zum Verarbeiten",processedNotes:"Verarbeitet {count} Notizen f\xFCr Notelert",processedNote:"Verarbeitet: {filename} ({count} Benachrichtigungen)",clearedHistory:"Verarbeitungshistorie gel\xF6scht",errorCreatingNotification:"Fehler beim Erstellen der Benachrichtigung: {title}",defaultTitle:"Erinnerung"}},it:{settings:{title:"Impostazioni Notelert",autoProcess:"Elaborazione automatica",autoProcessDesc:"Abilita l'elaborazione automatica dei pattern",processOnSave:"Elabora al salvare",processOnSaveDesc:"Elabora automaticamente quando si salva una nota",processOnOpen:"Elabora all'apertura",processOnOpenDesc:"Elabora automaticamente quando si apre una nota",debugMode:"Modalit\xE0 debug",debugModeDesc:"Mostra i messaggi di debug nella console",language:"Lingua",languageDesc:"Seleziona la lingua per il rilevamento dei pattern",excludedFolders:"Cartelle escluse",excludedFoldersDesc:"Cartelle che non verranno elaborate (separate da virgole)",customPatterns:"Parole chiave personalizzate",customPatternsDesc:"Parole che attivano l'elaborazione (separate da virgole)",supportedPatterns:"Pattern Supportati",keywords:"Parole chiave",dates:"Date:",times:"Orari:",examples:"Esempi:"},commands:{processCurrentNote:"Elabora nota corrente per Notelert",processAllNotes:"Elabora tutte le note per Notelert",clearProcessedHistory:"Cancella cronologia elaborazione"},notices:{noActiveNote:"Nessuna nota attiva da elaborare",processedNotes:"Elaborate {count} note per Notelert",processedNote:"Elaborata: {filename} ({count} notifiche)",clearedHistory:"Cronologia elaborazione cancellata",errorCreatingNotification:"Errore nella creazione della notifica: {title}",defaultTitle:"Promemoria"}},pt:{settings:{title:"Configura\xE7\xF5es Notelert",autoProcess:"Processamento autom\xE1tico",autoProcessDesc:"Ativar processamento autom\xE1tico de padr\xF5es",processOnSave:"Processar ao salvar",processOnSaveDesc:"Processar automaticamente ao salvar uma nota",processOnOpen:"Processar ao abrir",processOnOpenDesc:"Processar automaticamente ao abrir uma nota",debugMode:"Modo debug",debugModeDesc:"Mostrar mensagens de debug no console",language:"Idioma",languageDesc:"Selecionar idioma para detec\xE7\xE3o de padr\xF5es",excludedFolders:"Pastas exclu\xEDdas",excludedFoldersDesc:"Pastas que n\xE3o ser\xE3o processadas (separadas por v\xEDrgulas)",customPatterns:"Palavras-chave personalizadas",customPatternsDesc:"Palavras que ativam o processamento (separadas por v\xEDrgulas)",supportedPatterns:"Padr\xF5es Suportados",keywords:"Palavras-chave",dates:"Datas:",times:"Hor\xE1rios:",examples:"Exemplos:"},commands:{processCurrentNote:"Processar nota atual para Notelert",processAllNotes:"Processar todas as notas para Notelert",clearProcessedHistory:"Limpar hist\xF3rico de processamento"},notices:{noActiveNote:"Nenhuma nota ativa para processar",processedNotes:"Processadas {count} notas para Notelert",processedNote:"Processada: {filename} ({count} notifica\xE7\xF5es)",clearedHistory:"Hist\xF3rico de processamento limpo",errorCreatingNotification:"Erro ao criar notifica\xE7\xE3o: {title}",defaultTitle:"Lembrete"}},ru:{settings:{title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Notelert",autoProcess:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430",autoProcessDesc:"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0443\u044E \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432",processOnSave:"\u041E\u0431\u0440\u0430\u0431\u0430\u0442\u044B\u0432\u0430\u0442\u044C \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438",processOnSaveDesc:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u043E\u0431\u0440\u0430\u0431\u0430\u0442\u044B\u0432\u0430\u0442\u044C \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",processOnOpen:"\u041E\u0431\u0440\u0430\u0431\u0430\u0442\u044B\u0432\u0430\u0442\u044C \u043F\u0440\u0438 \u043E\u0442\u043A\u0440\u044B\u0442\u0438\u0438",processOnOpenDesc:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u043E\u0431\u0440\u0430\u0431\u0430\u0442\u044B\u0432\u0430\u0442\u044C \u043F\u0440\u0438 \u043E\u0442\u043A\u0440\u044B\u0442\u0438\u0438 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",debugMode:"\u0420\u0435\u0436\u0438\u043C \u043E\u0442\u043B\u0430\u0434\u043A\u0438",debugModeDesc:"\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u043E\u0442\u043B\u0430\u0434\u043A\u0438 \u0432 \u043A\u043E\u043D\u0441\u043E\u043B\u0438",language:"\u042F\u0437\u044B\u043A",languageDesc:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u044F\u0437\u044B\u043A \u0434\u043B\u044F \u043E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D\u0438\u044F \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432",excludedFolders:"\u0418\u0441\u043A\u043B\u044E\u0447\u0435\u043D\u043D\u044B\u0435 \u043F\u0430\u043F\u043A\u0438",excludedFoldersDesc:"\u041F\u0430\u043F\u043A\u0438, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u043D\u0435 \u0431\u0443\u0434\u0443\u0442 \u043E\u0431\u0440\u0430\u0431\u0430\u0442\u044B\u0432\u0430\u0442\u044C\u0441\u044F (\u0440\u0430\u0437\u0434\u0435\u043B\u0435\u043D\u043D\u044B\u0435 \u0437\u0430\u043F\u044F\u0442\u044B\u043C\u0438)",customPatterns:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0435 \u043A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u0441\u043B\u043E\u0432\u0430",customPatternsDesc:"\u0421\u043B\u043E\u0432\u0430, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u0437\u0430\u043F\u0443\u0441\u043A\u0430\u044E\u0442 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 (\u0440\u0430\u0437\u0434\u0435\u043B\u0435\u043D\u043D\u044B\u0435 \u0437\u0430\u043F\u044F\u0442\u044B\u043C\u0438)",supportedPatterns:"\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043C\u044B\u0435 \u0428\u0430\u0431\u043B\u043E\u043D\u044B",keywords:"\u041A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u0441\u043B\u043E\u0432\u0430",dates:"\u0414\u0430\u0442\u044B:",times:"\u0412\u0440\u0435\u043C\u0435\u043D\u0430:",examples:"\u041F\u0440\u0438\u043C\u0435\u0440\u044B:"},commands:{processCurrentNote:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u0434\u043B\u044F Notelert",processAllNotes:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u0432\u0441\u0435 \u0437\u0430\u043C\u0435\u0442\u043A\u0438 \u0434\u043B\u044F Notelert",clearProcessedHistory:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0438\u0441\u0442\u043E\u0440\u0438\u044E \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438"},notices:{noActiveNote:"\u041D\u0435\u0442 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0438 \u0434\u043B\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438",processedNotes:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u043D\u043E {count} \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u0434\u043B\u044F Notelert",processedNote:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u043D\u043E: {filename} ({count} \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439)",clearedHistory:"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 \u043E\u0447\u0438\u0449\u0435\u043D\u0430",errorCreatingNotification:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F: {title}",defaultTitle:"\u041D\u0430\u043F\u043E\u043C\u0438\u043D\u0430\u043D\u0438\u0435"}},ja:{settings:{title:"Notelert\u8A2D\u5B9A",autoProcess:"\u81EA\u52D5\u51E6\u7406",autoProcessDesc:"\u30D1\u30BF\u30FC\u30F3\u306E\u81EA\u52D5\u51E6\u7406\u3092\u6709\u52B9\u306B\u3059\u308B",processOnSave:"\u4FDD\u5B58\u6642\u306B\u51E6\u7406",processOnSaveDesc:"\u30CE\u30FC\u30C8\u3092\u4FDD\u5B58\u3059\u308B\u969B\u306B\u81EA\u52D5\u51E6\u7406\u3059\u308B",processOnOpen:"\u958B\u304F\u6642\u306B\u51E6\u7406",processOnOpenDesc:"\u30CE\u30FC\u30C8\u3092\u958B\u304F\u969B\u306B\u81EA\u52D5\u51E6\u7406\u3059\u308B",debugMode:"\u30C7\u30D0\u30C3\u30B0\u30E2\u30FC\u30C9",debugModeDesc:"\u30B3\u30F3\u30BD\u30FC\u30EB\u306B\u30C7\u30D0\u30C3\u30B0\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A",language:"\u8A00\u8A9E",languageDesc:"\u30D1\u30BF\u30FC\u30F3\u691C\u51FA\u306E\u8A00\u8A9E\u3092\u9078\u629E",excludedFolders:"\u9664\u5916\u30D5\u30A9\u30EB\u30C0",excludedFoldersDesc:"\u51E6\u7406\u3055\u308C\u306A\u3044\u30D5\u30A9\u30EB\u30C0\uFF08\u30AB\u30F3\u30DE\u533A\u5207\u308A\uFF09",customPatterns:"\u30AB\u30B9\u30BF\u30E0\u30AD\u30FC\u30EF\u30FC\u30C9",customPatternsDesc:"\u51E6\u7406\u3092\u30C8\u30EA\u30AC\u30FC\u3059\u308B\u5358\u8A9E\uFF08\u30AB\u30F3\u30DE\u533A\u5207\u308A\uFF09",supportedPatterns:"\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u308B\u30D1\u30BF\u30FC\u30F3",keywords:"\u30AD\u30FC\u30EF\u30FC\u30C9",dates:"\u65E5\u4ED8:",times:"\u6642\u9593:",examples:"\u4F8B:"},commands:{processCurrentNote:"\u73FE\u5728\u306E\u30CE\u30FC\u30C8\u3092Notelert\u7528\u306B\u51E6\u7406",processAllNotes:"\u3059\u3079\u3066\u306E\u30CE\u30FC\u30C8\u3092Notelert\u7528\u306B\u51E6\u7406",clearProcessedHistory:"\u51E6\u7406\u5C65\u6B74\u3092\u30AF\u30EA\u30A2"},notices:{noActiveNote:"\u51E6\u7406\u3059\u308B\u30A2\u30AF\u30C6\u30A3\u30D6\u306A\u30CE\u30FC\u30C8\u304C\u3042\u308A\u307E\u305B\u3093",processedNotes:"Notelert\u7528\u306B{count}\u500B\u306E\u30CE\u30FC\u30C8\u3092\u51E6\u7406\u3057\u307E\u3057\u305F",processedNote:"\u51E6\u7406\u6E08\u307F: {filename} ({count}\u500B\u306E\u901A\u77E5)",clearedHistory:"\u51E6\u7406\u5C65\u6B74\u3092\u30AF\u30EA\u30A2\u3057\u307E\u3057\u305F",errorCreatingNotification:"\u901A\u77E5\u306E\u4F5C\u6210\u30A8\u30E9\u30FC: {title}",defaultTitle:"\u30EA\u30DE\u30A4\u30F3\u30C0\u30FC"}},zh:{settings:{title:"Notelert\u8BBE\u7F6E",autoProcess:"\u81EA\u52A8\u5904\u7406",autoProcessDesc:"\u542F\u7528\u6A21\u5F0F\u81EA\u52A8\u5904\u7406",processOnSave:"\u4FDD\u5B58\u65F6\u5904\u7406",processOnSaveDesc:"\u4FDD\u5B58\u7B14\u8BB0\u65F6\u81EA\u52A8\u5904\u7406",processOnOpen:"\u6253\u5F00\u65F6\u5904\u7406",processOnOpenDesc:"\u6253\u5F00\u7B14\u8BB0\u65F6\u81EA\u52A8\u5904\u7406",debugMode:"\u8C03\u8BD5\u6A21\u5F0F",debugModeDesc:"\u5728\u63A7\u5236\u53F0\u663E\u793A\u8C03\u8BD5\u6D88\u606F",language:"\u8BED\u8A00",languageDesc:"\u9009\u62E9\u6A21\u5F0F\u68C0\u6D4B\u8BED\u8A00",excludedFolders:"\u6392\u9664\u6587\u4EF6\u5939",excludedFoldersDesc:"\u4E0D\u4F1A\u5904\u7406\u7684\u6587\u4EF6\u5939\uFF08\u9017\u53F7\u5206\u9694\uFF09",customPatterns:"\u81EA\u5B9A\u4E49\u5173\u952E\u8BCD",customPatternsDesc:"\u89E6\u53D1\u5904\u7406\u7684\u5355\u8BCD\uFF08\u9017\u53F7\u5206\u9694\uFF09",supportedPatterns:"\u652F\u6301\u7684\u6A21\u5F0F",keywords:"\u5173\u952E\u8BCD",dates:"\u65E5\u671F:",times:"\u65F6\u95F4:",examples:"\u793A\u4F8B:"},commands:{processCurrentNote:"\u5904\u7406\u5F53\u524D\u7B14\u8BB0\u7528\u4E8ENotelert",processAllNotes:"\u5904\u7406\u6240\u6709\u7B14\u8BB0\u7528\u4E8ENotelert",clearProcessedHistory:"\u6E05\u9664\u5904\u7406\u5386\u53F2"},notices:{noActiveNote:"\u6CA1\u6709\u8981\u5904\u7406\u7684\u6D3B\u8DC3\u7B14\u8BB0",processedNotes:"\u4E3ANotelert\u5904\u7406\u4E86{count}\u4E2A\u7B14\u8BB0",processedNote:"\u5DF2\u5904\u7406: {filename} ({count}\u4E2A\u901A\u77E5)",clearedHistory:"\u5904\u7406\u5386\u53F2\u5DF2\u6E05\u9664",errorCreatingNotification:"\u521B\u5EFA\u901A\u77E5\u9519\u8BEF: {title}",defaultTitle:"\u63D0\u9192"}},ar:{settings:{title:"\u0625\u0639\u062F\u0627\u062F\u0627\u062A Notelert",autoProcess:"\u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A\u0629",autoProcessDesc:"\u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A\u0629 \u0644\u0644\u0623\u0646\u0645\u0627\u0637",processOnSave:"\u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629 \u0639\u0646\u062F \u0627\u0644\u062D\u0641\u0638",processOnSaveDesc:"\u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A\u0629 \u0639\u0646\u062F \u062D\u0641\u0638 \u0645\u0644\u0627\u062D\u0638\u0629",processOnOpen:"\u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629 \u0639\u0646\u062F \u0627\u0644\u0641\u062A\u062D",processOnOpenDesc:"\u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A\u0629 \u0639\u0646\u062F \u0641\u062A\u062D \u0645\u0644\u0627\u062D\u0638\u0629",debugMode:"\u0648\u0636\u0639 \u0627\u0644\u062A\u0635\u062D\u064A\u062D",debugModeDesc:"\u0639\u0631\u0636 \u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u062A\u0635\u062D\u064A\u062D \u0641\u064A \u0648\u062D\u062F\u0629 \u0627\u0644\u062A\u062D\u0643\u0645",language:"\u0627\u0644\u0644\u063A\u0629",languageDesc:"\u0627\u062E\u062A\u064A\u0627\u0631 \u0644\u063A\u0629 \u0627\u0643\u062A\u0634\u0627\u0641 \u0627\u0644\u0623\u0646\u0645\u0627\u0637",excludedFolders:"\u0627\u0644\u0645\u062C\u0644\u062F\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u0628\u0639\u062F\u0629",excludedFoldersDesc:"\u0627\u0644\u0645\u062C\u0644\u062F\u0627\u062A \u0627\u0644\u062A\u064A \u0644\u0646 \u064A\u062A\u0645 \u0645\u0639\u0627\u0644\u062C\u062A\u0647\u0627 (\u0645\u0641\u0635\u0648\u0644\u0629 \u0628\u0641\u0648\u0627\u0635\u0644)",customPatterns:"\u0627\u0644\u0643\u0644\u0645\u0627\u062A \u0627\u0644\u0645\u0641\u062A\u0627\u062D\u064A\u0629 \u0627\u0644\u0645\u062E\u0635\u0635\u0629",customPatternsDesc:"\u0627\u0644\u0643\u0644\u0645\u0627\u062A \u0627\u0644\u062A\u064A \u062A\u0628\u062F\u0623 \u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629 (\u0645\u0641\u0635\u0648\u0644\u0629 \u0628\u0641\u0648\u0627\u0635\u0644)",supportedPatterns:"\u0627\u0644\u0623\u0646\u0645\u0627\u0637 \u0627\u0644\u0645\u062F\u0639\u0648\u0645\u0629",keywords:"\u0627\u0644\u0643\u0644\u0645\u0627\u062A \u0627\u0644\u0645\u0641\u062A\u0627\u062D\u064A\u0629",dates:"\u0627\u0644\u062A\u0648\u0627\u0631\u064A\u062E:",times:"\u0627\u0644\u0623\u0648\u0642\u0627\u062A:",examples:"\u0623\u0645\u062B\u0644\u0629:"},commands:{processCurrentNote:"\u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629 \u0644\u0640 Notelert",processAllNotes:"\u0645\u0639\u0627\u0644\u062C\u0629 \u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0644\u0640 Notelert",clearProcessedHistory:"\u0645\u0633\u062D \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629"},notices:{noActiveNote:"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0644\u0627\u062D\u0638\u0629 \u0646\u0634\u0637\u0629 \u0644\u0644\u0645\u0639\u0627\u0644\u062C\u0629",processedNotes:"\u062A\u0645 \u0645\u0639\u0627\u0644\u062C\u0629 {count} \u0645\u0644\u0627\u062D\u0638\u0629 \u0644\u0640 Notelert",processedNote:"\u062A\u0645 \u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629: {filename} ({count} \u0625\u0634\u0639\u0627\u0631)",clearedHistory:"\u062A\u0645 \u0645\u0633\u062D \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629",errorCreatingNotification:"\u062E\u0637\u0623 \u0641\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0625\u0634\u0639\u0627\u0631: {title}",defaultTitle:"\u062A\u0630\u0643\u064A\u0631"}}};function d(l,e,a){let r=Q[l]||Q.en,i=e.split("."),o=r;for(let n of i)o=o?.[n];if(typeof o!="string")return e;if(a)for(let[n,s]of Object.entries(a))o=o.replace(`{${n}}`,String(s));return o}var W=`${O}/scheduleEmailReminder`,xe=`${O}/cancelScheduledEmail`,X=1e4;async function Y(l,e,a,t,r,i,o){let n=new AbortController,s=setTimeout(()=>n.abort(),X);try{let u={to:l,title:e,message:a,scheduledDate:t.toISOString(),notificationId:r,userId:o||null};console.log("[Notelert] Enviando request a:",W),console.log("[Notelert] Body:",JSON.stringify(u,null,2)),console.log("[Notelert] API Key presente:",!!i);let c=await fetch(W,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":i},body:JSON.stringify(u),signal:n.signal});if(clearTimeout(s),console.log("[Notelert] Response status:",c.status),console.log("[Notelert] Response ok:",c.ok),!c.ok){let p;try{p=await c.json()}catch(h){p={error:`HTTP ${c.status}: ${c.statusText}`}}return console.error("[Notelert] Error response:",p),c.status===401?{success:!1,error:p.error||p.message||"API Key inv\xE1lida o faltante"}:c.status===429?{success:!1,error:p.error||p.message||"L\xEDmite de emails alcanzado (m\xE1ximo 100)"}:{success:!1,error:p.error||p.message||`HTTP ${c.status}`}}let g=await c.json();return console.log("[Notelert] Success response:",g),{success:!0,notificationId:g.notificationId||r}}catch(u){return clearTimeout(s),u.name==="AbortError"?(console.error("[Notelert] Timeout: El servidor no respondi\xF3 en 10 segundos"),{success:!1,error:"Timeout: El servidor no respondi\xF3 en 10 segundos"}):(console.error("[Notelert] Fetch error:",u),console.error("[Notelert] Error message:",u.message),console.error("[Notelert] Error stack:",u.stack),{success:!1,error:u.message||"Error de red al programar email"})}}async function Z(l,e,a){let t=new AbortController,r=setTimeout(()=>t.abort(),X);try{let i=await fetch(xe,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":e},body:JSON.stringify({notificationId:l,userId:a||null}),signal:t.signal});if(clearTimeout(r),!i.ok){let o;try{o=await i.json()}catch(n){o={error:`HTTP ${i.status}: ${i.statusText}`}}return i.status===401?{success:!1,error:o.error||o.message||"API Key inv\xE1lida o faltante"}:i.status===404?{success:!1,error:o.error||o.message||"Email programado no encontrado"}:{success:!1,error:o.error||o.message||`HTTP ${i.status}`}}return{success:!0}}catch(i){return clearTimeout(r),i.name==="AbortError"?{success:!1,error:"Timeout: El servidor no respondi\xF3 en 10 segundos"}:{success:!1,error:i.message||"Error de red al cancelar email"}}}function ee(){return`obsidian-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}var I=L(require("obsidian"));var te=class{async search(e,a){let t=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&limit=5&addressdetails=1&extratags=1&accept-language=${a}`,r=await fetch(t,{method:"GET",headers:{"User-Agent":"Notelert-Obsidian-Plugin/1.0",Accept:"application/json","Accept-Language":a},referrerPolicy:"no-referrer"});if(!r.ok)throw new Error(`Nominatim error: ${r.status}`);let i=await r.json();return Array.isArray(i)?i.map(o=>{let n=o.address||{};return{name:n.road||n.city||n.town||n.village||o.display_name?.split(",")[0]||"Ubicaci\xF3n",latitude:parseFloat(o.lat),longitude:parseFloat(o.lon),address:o.display_name||o.name||"",displayName:o.display_name||o.name||"Ubicaci\xF3n sin nombre"}}):[]}},ve="AIzaSyBwR-GmihN8Xic-npwi6p4wTUwJ67ueWvk",z=class{constructor(e,a=!1,t=""){this.apiKey=e;this.useProxy=a;this.proxyUrl=t}async search(e,a){let t,r={};this.useProxy&&this.proxyUrl?t=`${this.proxyUrl}?query=${encodeURIComponent(e)}&language=${a}`:t=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=${this.apiKey}&language=${a}`;let i=await fetch(t,r);if(!i.ok)throw new Error(`Google Maps error: ${i.status} ${i.statusText}`);let o=await i.json();if(o.status==="ZERO_RESULTS")return[];if(o.status!=="OK")throw new Error(`Google Maps API error: ${o.status} - ${o.error_message||"Unknown error"}`);return!o.results||o.results.length===0?[]:o.results.slice(0,5).map(n=>{let s=n.address_components||[];return{name:s.find(c=>c.types.includes("route"))?.long_name||s.find(c=>c.types.includes("locality"))?.long_name||n.formatted_address?.split(",")[0]||"Ubicaci\xF3n",latitude:n.geometry.location.lat,longitude:n.geometry.location.lng,address:n.formatted_address,displayName:n.formatted_address}})}},ae=class{constructor(e){this.apiKey=e}async search(e,a){let t=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json?access_token=${this.apiKey}&limit=5&language=${a}`,r=await fetch(t);if(!r.ok)throw new Error(`Mapbox error: ${r.status}`);let i=await r.json();return i.features?i.features.slice(0,5).map(o=>{let[n,s]=o.center;return{name:o.text||o.place_name?.split(",")[0]||"Ubicaci\xF3n",latitude:s,longitude:n,address:o.place_name||o.text||"",displayName:o.place_name||o.text||"Ubicaci\xF3n"}}):[]}},oe=class{constructor(e){this.apiKey=e}async search(e,a){let t=`https://us1.locationiq.com/v1/search.php?key=${this.apiKey}&q=${encodeURIComponent(e)}&format=json&limit=5&addressdetails=1&accept-language=${a}`,r=await fetch(t);if(!r.ok)throw new Error(`LocationIQ error: ${r.status}`);let i=await r.json();return Array.isArray(i)?i.map(o=>{let n=o.address||{};return{name:n.road||n.city||n.town||n.village||o.display_name?.split(",")[0]||"Ubicaci\xF3n",latitude:parseFloat(o.lat),longitude:parseFloat(o.lon),address:o.display_name||o.name||"",displayName:o.display_name||o.name||"Ubicaci\xF3n"}}):[]}},re=class{constructor(e){this.apiKey=e}async search(e,a){let t=`https://api.opencagedata.com/geocode/v1/json?q=${encodeURIComponent(e)}&key=${this.apiKey}&limit=5&language=${a}`,r=await fetch(t);if(!r.ok)throw new Error(`OpenCage error: ${r.status}`);let i=await r.json();return i.status.code!==200||!i.results?[]:i.results.slice(0,5).map(o=>{let n=o.components||{};return{name:n.road||n.city||n.town||n.village||o.formatted?.split(",")[0]||"Ubicaci\xF3n",latitude:o.geometry.lat,longitude:o.geometry.lng,address:o.formatted||"",displayName:o.formatted||"Ubicaci\xF3n"}})}},ie=class{constructor(e,a){this.apiKey=e;this.appId=a}async search(e,a){let r=await fetch("https://places-dsn.algolia.net/1/places/query",{method:"POST",headers:{"Content-Type":"application/json","X-Algolia-Application-Id":this.appId,"X-Algolia-API-Key":this.apiKey},body:JSON.stringify({query:e,language:a,hitsPerPage:5})});if(!r.ok)throw new Error(`Algolia Places error: ${r.status}`);let i=await r.json();return i.hits?i.hits.map(o=>({name:o.locale_names?.[0]||o.name||o.value||"Ubicaci\xF3n",latitude:o._geoloc?.lat||o.latlng?.lat,longitude:o._geoloc?.lng||o.latlng?.lng,address:o.value||o.name||"",displayName:o.value||o.name||"Ubicaci\xF3n"})):[]}};async function ne(l,e,a,t){let r=e.geocodingProvider||"nominatim";t?.(`Proveedor configurado: ${r}`);let i=[r,"nominatim"].filter((o,n,s)=>s.indexOf(o)===n);t?.(`Proveedores a intentar: ${i.join(", ")}`);for(let o of i)try{let n;switch(o){case"google":let u=e.googleMapsApiKey&&e.googleMapsApiKey.trim()!==""?e.googleMapsApiKey:ve;if(!u||u.trim()===""){t?.("Google Maps: API key no configurada (ni usuario ni plugin)");continue}let c=e.useFirebaseProxy||!1,g=e.firebaseGeocodingUrl||"";c&&g?(t?.("Google Maps: Usando proxy Firebase"),n=new z(u,!0,g)):(t?.(`Google Maps: API key encontrada (${u.substring(0,10)}...)`),n=new z(u,!1));break;case"mapbox":let p=e.mapboxApiKey;if(!p||p.trim()===""){t?.("Mapbox: API key no configurada");continue}n=new ae(p);break;case"locationiq":let h=e.locationiqApiKey;if(!h||h.trim()===""){t?.("LocationIQ: API key no configurada");continue}n=new oe(h);break;case"opencage":let f=e.opencageApiKey;if(!f||f.trim()===""){t?.("OpenCage: API key no configurada");continue}n=new re(f);break;case"algolia":let m=e.algoliaApiKey,y=e.algoliaAppId;if(!m||!y||m.trim()===""||y.trim()===""){t?.("Algolia: API key o App ID no configurados");continue}n=new ie(m,y);break;default:n=new te}t?.(`Buscando con ${o}...`);let s=await n.search(l,a);if(s.length>0)return t?.(`\u2705 Encontrados ${s.length} resultados con ${o}`),s;t?.(`\u26A0\uFE0F ${o} no devolvi\xF3 resultados, intentando siguiente proveedor...`)}catch(n){let s=n?.message||String(n);t?.(`\u274C Error con ${o}: ${s}`);continue}return t?.("\u274C Todos los proveedores fallaron"),[]}var D=class extends I.Modal{constructor(e,a,t,r,i,o,n){super(e);this.selectedLocation=null;this.searchTimeout=null;this.searchResults=[];this.map=null;this.mapMarker=null;this.mapLoaded=!1;this.plugin=a,this.language=t,this.editor=r,this.cursor=i,this.originalText=o,this.onCancel=n}onOpen(){let{contentEl:e}=this;e.empty(),e.setAttribute("style",`
      min-width: 320px; 
      max-width: 700px; 
      width: 90vw;
      max-height: 90vh; 
      overflow: hidden;
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      margin: 0 auto;
    `);let a=e.createEl("div",{attr:{style:`
          flex: 1;
          overflow-y: auto;
          overflow-x: hidden;
          padding-right: 5px;
          margin-bottom: 10px;
        `}});a.id="notelert-modal-scroll-container",a.createEl("h2",{text:d(this.language,"locationPicker.title")||"Seleccionar Ubicaci\xF3n",attr:{style:"margin: 0 0 15px 0; font-size: 20px; font-weight: 600;"}}),a.createEl("p",{text:d(this.language,"locationPicker.selectLocation")||"Busca una direcci\xF3n o haz clic en el mapa para seleccionar una ubicaci\xF3n",attr:{style:"color: var(--text-muted); font-size: 13px; margin-bottom: 15px; font-style: italic; line-height: 1.4;"}});let t=a.createEl("div",{attr:{style:`
          margin: 15px 0;
          padding: 15px;
          background: var(--background-secondary);
          border: 2px solid var(--background-modifier-border);
          border-radius: 8px;
          font-size: 12px;
          height: 250px;
          min-height: 250px;
          overflow-y: auto;
          overflow-x: hidden;
          font-family: 'Courier New', monospace;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          flex-shrink: 0;
        `}});t.id="notelert-debug-container",t.innerHTML=`
      <div style="font-weight: 700; margin-bottom: 12px; color: var(--text-accent); font-size: 14px; border-bottom: 1px solid var(--background-modifier-border); padding-bottom: 8px;">
        \u{1F50D} Debug del Mapa
      </div>
      <div id="map-debug-info" style="color: var(--text-normal); line-height: 1.8; word-wrap: break-word; min-height: 200px;"></div>
    `;let r=a.createEl("div",{cls:"notelert-location-search"});r.setAttribute("style",`
      margin-bottom: 15px; 
      position: relative;
      z-index: 1000;
    `);let i=r.createEl("input",{type:"text",placeholder:d(this.language,"locationPicker.searchPlaceholder")||"Buscar direcci\xF3n...",cls:"notelert-location-input"});i.setAttribute("style",`
      width: 100%; 
      padding: 12px; 
      border: 1px solid var(--background-modifier-border); 
      border-radius: 6px;
      font-size: 14px;
      box-sizing: border-box;
      background: var(--background-primary);
      color: var(--text-normal);
    `);let o=r.createEl("div",{cls:"notelert-location-results"});o.setAttribute("style",`
      position: absolute;
      top: calc(100% + 4px);
      left: 0;
      right: 0;
      max-height: 200px; 
      overflow-y: auto; 
      border: 1px solid var(--background-modifier-border); 
      border-radius: 6px; 
      display: none;
      background: var(--background-primary);
      z-index: 1001;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    `),o.id="location-results-container";let n=a.createEl("div",{cls:"notelert-map-container"});n.setAttribute("style",`
      width: 100%;
      height: 250px;
      min-height: 200px;
      margin: 15px 0;
      border: 1px solid var(--background-modifier-border);
      border-radius: 6px;
      overflow: hidden;
      background: var(--background-secondary);
      position: relative;
    `),n.id="notelert-map-container";let s=n.createEl("div",{attr:{style:`
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          color: var(--text-muted);
          font-size: 14px;
          z-index: 1000;
          text-align: center;
          padding: 15px;
          background: var(--background-primary);
          border: 2px solid var(--text-error);
          border-radius: 6px;
          max-width: 90%;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        `}});s.id="map-loading",s.innerHTML=`
      <div style="font-weight: 500; margin-bottom: 8px;">${d(this.language,"locationPicker.loadingMap")||"Cargando mapa..."}</div>
    `,this.plugin.settings.debugMode&&e.createEl("button",{text:"\u{1F50D} Debug Mapa",attr:{style:`
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 6px 12px;
            font-size: 11px;
            background: var(--background-secondary);
            border: 1px solid var(--background-modifier-border);
            border-radius: 4px;
            cursor: pointer;
            z-index: 2000;
          `}}).addEventListener("click",()=>{let b=document.getElementById("map-debug-info");b&&(b.style.display=b.style.display==="none"?"block":"none")});let u=a.createEl("div",{cls:"notelert-location-selected"});u.setAttribute("style",`
      margin: 15px 0; 
      padding: 15px; 
      background: var(--background-secondary); 
      border-radius: 6px; 
      display: none; 
      word-wrap: break-word;
      border: 2px solid var(--interactive-accent);
    `),u.id="location-selected-container";let c=a.createEl("div",{cls:"notelert-location-favorites"});c.setAttribute("style","margin: 15px 0;"),c.createEl("div",{attr:{style:`
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 10px;
          cursor: pointer;
        `}}).createEl("h3",{text:d(this.language,"locationPicker.favorites")||"Ubicaciones Favoritas",attr:{style:"font-size: 16px; font-weight: 500; margin: 0;"}});let p=c.createEl("div",{cls:"notelert-location-favorites-list"});p.setAttribute("style",`
      max-height: 150px; 
      overflow-y: auto;
      margin-top: 10px;
    `),this.renderFavorites(p);let h=e.createEl("div",{cls:"notelert-locationpicker-buttons"});h.setAttribute("style",`
      display: flex; 
      gap: 10px; 
      justify-content: flex-end; 
      margin-top: 10px; 
      flex-wrap: wrap;
      flex-shrink: 0;
      padding-top: 10px;
      border-top: 1px solid var(--background-modifier-border);
    `);let f=h.createEl("button",{text:d(this.language,"locationPicker.cancelButton")||"Cancelar",cls:"mod-secondary"});f.setAttribute("style",`
      flex: 1; 
      min-width: 100px; 
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 6px;
    `),f.addEventListener("click",()=>{this.onCancel(),this.close()});let m=h.createEl("button",{text:d(this.language,"locationPicker.confirmButton")||"Confirmar",cls:"mod-cta"});m.id="confirm-location-button",m.setAttribute("disabled","true"),m.setAttribute("style",`
      flex: 1; 
      min-width: 100px; 
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 6px;
      opacity: 0.5;
      cursor: not-allowed;
    `),m.addEventListener("click",()=>{this.selectedLocation&&(this.createNotificationFromLocation(this.selectedLocation.name,this.selectedLocation.latitude,this.selectedLocation.longitude,100),this.close())}),i.addEventListener("input",y=>{let b=y.target.value.trim();if(this.searchTimeout&&clearTimeout(this.searchTimeout),b.length<3){o.style.display="none";let A=i.parentElement;A&&A.style.position!=="relative"&&(A.style.position="relative");return}this.searchTimeout=window.setTimeout(()=>{this.searchLocations(b,o)},500)}),this.loadGoogleMap()}loadGoogleMap(){if(this.addDebugInfo("Iniciando carga de Google Maps..."),window.google&&window.google.maps){this.addDebugInfo("\u2705 Google Maps ya est\xE1 cargado"),this.mapLoaded=!0,setTimeout(()=>this.initMap(),100);return}if(document.querySelector('script[src*="maps.googleapis.com"]')){this.addDebugInfo("\u23F3 Script de Google Maps ya est\xE1 siendo cargado, esperando...");let o=0,n=50,s=setInterval(()=>{o++,window.google&&window.google.maps?(clearInterval(s),this.addDebugInfo("\u2705 Google Maps cargado despu\xE9s de esperar"),this.mapLoaded=!0,setTimeout(()=>this.initMap(),100)):o>=n&&(clearInterval(s),this.addDebugInfo("\u274C Timeout esperando que se cargue el script existente"),this.showMapError("Timeout esperando que se cargue Google Maps","El script estaba carg\xE1ndose pero no se complet\xF3. Intenta recargar la p\xE1gina."))},100);return}let a=`initNotelertMap_${Date.now()}`;this.addDebugInfo(`\u{1F4DD} Creando callback: ${a}`);let t=document.createElement("script"),r="AIzaSyBwR-GmihN8Xic-npwi6p4wTUwJ67ueWvk",i=`https://maps.googleapis.com/maps/api/js?key=${r}&libraries=places&callback=${a}`;t.src=i,t.async=!0,t.defer=!0,this.addDebugInfo(`\u{1F4E1} Cargando script: ${i.substring(0,80)}...`),t.onerror=o=>{this.addDebugInfo("\u274C Error en script.onerror");let n=`
        <strong>Error cargando script:</strong><br>
        URL: ${i.substring(0,100)}...<br>
        API Key: ${r.substring(0,10)}...<br>
        Verifica:<br>
        - Tu conexi\xF3n a internet<br>
        - Que la API key sea v\xE1lida<br>
        - Que la Geocoding API est\xE9 habilitada en Google Cloud
      `;this.showMapError("Error al cargar Google Maps. Verifica tu conexi\xF3n a internet.",n),delete window[a]},window[a]=()=>{this.addDebugInfo("\u2705 Callback ejecutado - Google Maps cargado"),this.mapLoaded=!0,delete window[a],setTimeout(()=>this.initMap(),100)},document.head.appendChild(t),this.addDebugInfo("\u{1F4E6} Script a\xF1adido al DOM"),setTimeout(()=>{if(!this.mapLoaded&&!this.map){this.addDebugInfo("\u23F1\uFE0F Timeout despu\xE9s de 10 segundos");let o=`
          <strong>Timeout cargando el mapa:</strong><br>
          Estado: mapLoaded=${this.mapLoaded}, map=${this.map?"existe":"null"}<br>
          Google disponible: ${window.google?"s\xED":"no"}<br>
          Verifica:<br>
          - Tu conexi\xF3n a internet<br>
          - Que no haya bloqueadores de scripts<br>
          - La consola del navegador para m\xE1s detalles
        `;this.showMapError("Timeout cargando el mapa. Intenta recargar.",o)}},1e4)}showMapError(e,a){let t=document.getElementById("map-loading"),r=document.getElementById("map-debug-info");t&&(t.innerHTML=`
        <div style="color: var(--text-error); font-weight: 500; margin-bottom: 8px;">\u26A0\uFE0F Error</div>
        <div style="color: var(--text-muted); font-size: 12px; margin-bottom: 8px;">${e}</div>
        ${a?`<div id="map-debug-info" style="font-size: 11px; color: var(--text-muted); text-align: left; max-height: 100px; overflow-y: auto; background: var(--background-secondary); padding: 8px; border-radius: 4px; margin-top: 8px;">${a}</div>`:""}
      `),r&&a&&(r.innerHTML=a,r.style.display="block")}addDebugInfo(e){let a=document.getElementById("map-debug-info");if(a){let t=new Date().toLocaleTimeString(),r=a.innerHTML||"",i=e.includes("\u274C")||e.includes("Error")||e.includes("Excepci\xF3n")?"var(--text-error)":e.includes("\u2705")?"var(--text-success)":e.includes("\u26A0\uFE0F")?"var(--text-warning)":"var(--text-normal)",o=e.includes("\u274C")||e.includes("Error")||e.includes("Excepci\xF3n")?"rgba(255, 0, 0, 0.1)":e.includes("\u2705")?"rgba(0, 255, 0, 0.1)":"transparent";a.innerHTML=`${r}<div style="margin: 4px 0; padding: 6px 8px; font-size: 11px; color: ${i}; background: ${o}; border-left: 3px solid ${i}; border-radius: 3px; word-wrap: break-word; white-space: pre-wrap;"><span style="opacity: 0.7;">[${t}]</span> ${e}</div>`;let n=document.getElementById("notelert-debug-container");n&&(n.scrollTop=n.scrollHeight)}this.plugin.log(`[Mapa] ${e}`)}initMap(){try{this.addDebugInfo("\u{1F5FA}\uFE0F Iniciando inicializaci\xF3n del mapa...");let e=document.getElementById("notelert-map-container");if(!e){this.addDebugInfo("\u274C Contenedor del mapa no encontrado"),this.showMapError("Contenedor del mapa no encontrado","El elemento #notelert-map-container no existe en el DOM");return}if(this.addDebugInfo("\u2705 Contenedor encontrado"),!window.google){this.addDebugInfo("\u274C window.google no existe"),this.showMapError("Google Maps no est\xE1 disponible","window.google no est\xE1 definido. El script no se carg\xF3 correctamente.");return}if(!window.google.maps){this.addDebugInfo("\u274C window.google.maps no existe"),this.showMapError("Google Maps API no disponible","window.google.maps no est\xE1 definido. Verifica que el script se carg\xF3 correctamente.");return}this.addDebugInfo("\u2705 Google Maps API disponible");let a=document.getElementById("map-loading");a&&(a.style.display="none",this.addDebugInfo("\u2705 Mensaje de carga ocultado"));let t=this.selectedLocation?{lat:this.selectedLocation.latitude,lng:this.selectedLocation.longitude}:{lat:40.4168,lng:-3.7038};this.addDebugInfo(`\u{1F4CD} Centro: ${t.lat}, ${t.lng}`),this.addDebugInfo("\u{1F528} Creando instancia del mapa...");try{this.map=new window.google.maps.Map(e,{center:t,zoom:13,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControl:!1,disableDefaultUI:!1,gestureHandling:"cooperative"}),this.addDebugInfo("\u2705 Mapa creado"),setTimeout(()=>{let r=document.getElementById("map-loading");r&&(r.style.display="none",this.addDebugInfo("\u2705 Mensaje de carga ocultado"))},500);try{this.map.addListener("error",r=>{this.addDebugInfo(`\u274C Error en el mapa (listener): ${r?.message||JSON.stringify(r)}`),this.showMapError("Error al cargar el mapa",`Error del mapa: ${r?.message||"Error desconocido"}`)})}catch(r){this.addDebugInfo(`\u26A0\uFE0F No se pudo a\xF1adir listener de errores: ${r}`)}setTimeout(()=>{this.checkMapStatus()},2e3)}catch(r){throw this.addDebugInfo(`\u274C Excepci\xF3n al crear mapa: ${r?.message||r}`),this.addDebugInfo(`Stack: ${r?.stack?.substring(0,200)||"No stack"}`),r}this.map.addListener("click",r=>{let i=r.latLng.lat(),o=r.latLng.lng();this.addDebugInfo(`\u{1F5B1}\uFE0F Click en mapa: ${i}, ${o}`),this.reverseGeocode(i,o)}),this.selectedLocation&&(this.addDebugInfo(`\u{1F4CD} Mostrando ubicaci\xF3n seleccionada: ${this.selectedLocation.name}`),this.updateMapMarker(this.selectedLocation.latitude,this.selectedLocation.longitude)),this.addDebugInfo("\u2705 Mapa inicializado correctamente")}catch(e){let a=e?.message||String(e),t=e?.stack||"No hay stack trace";this.addDebugInfo(`\u274C Excepci\xF3n: ${a}`),this.addDebugInfo(`Stack: ${t.substring(0,300)}`);let r=`
        <strong>Error al inicializar el mapa:</strong><br>
        Mensaje: ${a}<br>
        Stack: ${t.substring(0,200)}...<br>
        Tipo: ${e?.name||"Unknown"}
      `;this.showMapError(`Error: ${a}`,r)}}checkMapStatus(){this.addDebugInfo("\u{1F50D} Verificando estado del mapa...");let e=document.getElementById("notelert-map-container");if(!e){this.addDebugInfo("\u274C Contenedor no encontrado en verificaci\xF3n");return}this.addDebugInfo(`\u{1F4E6} Contenedor encontrado, tama\xF1o: ${e.offsetWidth}x${e.offsetHeight}`);let a=null,t="",r=e.querySelectorAll("div");this.addDebugInfo(`\u{1F50E} Buscando en ${r.length} elementos div...`);for(let o of Array.from(r)){let n=o.innerText||o.textContent||"",s=n.toLowerCase();if(s.includes("no ha cargado")||s.includes("no se ha podido cargar")||s.includes("something went wrong")||s.includes("error")||s.includes("forbidden")||s.includes("unauthorized")||s.includes("api key")){a=o,t=n,this.addDebugInfo(`\u274C Error encontrado: "${n.substring(0,100)}"`);break}}if(!a){let o=e.querySelectorAll('div[style*="error"], div[style*="Error"], div[class*="error"]');o.length>0&&(a=o[0],t=a.innerText||a.textContent||"",this.addDebugInfo(`\u274C Error encontrado por estilo: "${t.substring(0,100)}"`))}let i=e.querySelectorAll("iframe");if(this.addDebugInfo(`\u{1F5BC}\uFE0F Iframes encontrados: ${i.length}`),i.length>0)for(let o of Array.from(i))this.addDebugInfo(`  - Iframe src: ${o.src.substring(0,80)}...`);if(a){this.addDebugInfo(`\u274C Error de Google Maps detectado: ${t}`),this.showMapError("Google Maps no se carg\xF3 correctamente",`
        <strong>Error detectado:</strong><br>
        ${t}<br><br>
        <strong>Posibles causas:</strong><br>
        - API key inv\xE1lida o sin permisos<br>
        - Maps JavaScript API no habilitada (no solo Geocoding)<br>
        - Restricciones de la API key muy estrictas<br>
        - L\xEDmite de uso excedido<br>
        - Problema de conexi\xF3n<br><br>
        <strong>Verifica en Google Cloud Console:</strong><br>
        1. Que "Maps JavaScript API" est\xE9 habilitada<br>
        2. Que la API key tenga permisos para Maps JavaScript API<br>
        3. Que las restricciones de la API key permitan tu uso
      `);return}if(this.map){this.addDebugInfo("\u{1F5FA}\uFE0F Mapa existe, verificando tiles...");let o=e.querySelectorAll('img[src*="maps.googleapis.com"], img[src*="googleapis"], img[src*="gstatic"]');if(this.addDebugInfo(`\u{1F5BC}\uFE0F Tiles encontrados: ${o.length}`),o.length===0){this.addDebugInfo("\u26A0\uFE0F No se detectaron tiles del mapa cargados"),this.addDebugInfo("\u{1F50D} Buscando cualquier imagen en el contenedor...");let n=e.querySelectorAll("img");this.addDebugInfo(`\u{1F4F8} Total im\xE1genes: ${n.length}`);for(let u of Array.from(n))this.addDebugInfo(`  - Imagen src: ${u.src.substring(0,80)}...`);let s=e.innerHTML.substring(0,500);this.addDebugInfo(`\u{1F4C4} Primeros 500 chars del HTML: ${s}`),this.showMapError("El mapa no muestra tiles",'El mapa se cre\xF3 pero no se est\xE1n cargando las im\xE1genes. Verifica tu conexi\xF3n y la API key. Aseg\xFArate de que "Maps JavaScript API" est\xE9 habilitada en Google Cloud.')}else{this.addDebugInfo(`\u2705 Mapa verificado: ${o.length} tiles cargados`);let n=document.getElementById("map-loading");n&&(n.style.display="none")}}else this.addDebugInfo("\u26A0\uFE0F Mapa no est\xE1 definido en verificaci\xF3n");setTimeout(()=>{this.addDebugInfo("\u{1F50D} Verificaci\xF3n adicional despu\xE9s de 3 segundos..."),this.checkMapStatusDelayed()},3e3)}checkMapStatusDelayed(){let e=document.getElementById("notelert-map-container");if(!e)return;let a=e.innerText||e.textContent||"";a.toLowerCase().includes("error")||a.toLowerCase().includes("no ha cargado")||a.toLowerCase().includes("forbidden")?(this.addDebugInfo(`\u274C Error detectado en verificaci\xF3n tard\xEDa: ${a.substring(0,200)}`),this.showMapError("Error detectado en el mapa",a.substring(0,300))):this.addDebugInfo("\u2705 No se detectaron errores en verificaci\xF3n tard\xEDa")}async reverseGeocode(e,a){try{new window.google.maps.Geocoder().geocode({location:{lat:e,lng:a}},(r,i)=>{if(i==="OK"&&r[0]){let o=r[0],n=o.formatted_address,s=o.address_components[0]?.long_name||o.address_components[1]?.long_name||"Ubicaci\xF3n seleccionada";this.selectLocation({name:s,latitude:e,longitude:a,radius:100,address:n}),this.updateMapMarker(e,a)}else this.selectLocation({name:`Ubicaci\xF3n (${e.toFixed(6)}, ${a.toFixed(6)})`,latitude:e,longitude:a,radius:100}),this.updateMapMarker(e,a)})}catch(t){this.plugin.log(`Error en geocodificaci\xF3n inversa: ${t}`),this.selectLocation({name:`Ubicaci\xF3n (${e.toFixed(6)}, ${a.toFixed(6)})`,latitude:e,longitude:a,radius:100}),this.updateMapMarker(e,a)}}updateMapMarker(e,a){!this.map||(this.mapMarker&&this.mapMarker.setMap(null),this.mapMarker=new window.google.maps.Marker({position:{lat:e,lng:a},map:this.map,draggable:!0,animation:window.google.maps.Animation.DROP}),this.mapMarker.addListener("dragend",t=>{let r=t.latLng.lat(),i=t.latLng.lng();this.reverseGeocode(r,i)}),this.map.setCenter({lat:e,lng:a}))}onClose(){let{contentEl:e}=this;e.empty(),this.searchTimeout&&clearTimeout(this.searchTimeout),this.mapMarker&&(this.mapMarker.setMap(null),this.mapMarker=null),this.map=null,this.mapLoaded=!1}async searchLocations(e,a){try{a.style.display="block",a.innerHTML=`<div style='padding: 20px; text-align: center; color: var(--text-muted);'>${d(this.language,"locationPicker.searching")||"Buscando..."}</div>`,this.plugin.log(`Buscando ubicaciones: ${e}`);let t=await ne(e,this.plugin.settings,this.language||"es",r=>this.plugin.log(r));if(this.plugin.log(`Resultados encontrados: ${t.length}`),t.length===0){a.innerHTML=`<div style='padding: 20px; text-align: center; color: var(--text-muted);'>${d(this.language,"locationPicker.noResults")||"No se encontraron resultados"}</div>`;return}a.innerHTML="",t.forEach(r=>{try{let i=a.createEl("div",{cls:"notelert-location-result-item"});i.setAttribute("style","padding: 12px; margin: 5px 0; border: 1px solid var(--background-modifier-border); border-radius: 4px; cursor: pointer; transition: background 0.2s; word-wrap: break-word;"),i.addEventListener("mouseenter",()=>{i.style.background="var(--background-modifier-hover)"}),i.addEventListener("mouseleave",()=>{i.style.background=""}),i.createEl("div",{text:r.name,attr:{style:"font-weight: 500; margin-bottom: 4px;"}}),i.createEl("div",{text:r.displayName.length>80?r.displayName.substring(0,80)+"...":r.displayName,attr:{style:"font-size: 11px; color: var(--text-muted);"}}),i.addEventListener("click",()=>{if(isNaN(r.latitude)||isNaN(r.longitude)){this.plugin.log(`Coordenadas inv\xE1lidas: lat=${r.latitude}, lon=${r.longitude}`),new I.Notice(d(this.language,"locationPicker.error")||"Error: Coordenadas inv\xE1lidas");return}this.selectLocation({name:r.name,latitude:r.latitude,longitude:r.longitude,radius:100,address:r.displayName}),this.map&&this.updateMapMarker(r.latitude,r.longitude)})}catch(i){this.plugin.log(`Error procesando resultado: ${i}`)}})}catch(t){let r=t?.message||String(t);this.plugin.log(`Error buscando ubicaciones: ${r}`),this.plugin.log(`Stack: ${t?.stack||"No stack trace"}`);let i=d(this.language,"locationPicker.error")||"Error al buscar ubicaciones";r.includes("CORS")||r.includes("Failed to fetch")?i=d(this.language,"locationPicker.connectionError")||"Error de conexi\xF3n. Verifica tu conexi\xF3n a internet.":r.includes("429")?i=d(this.language,"locationPicker.rateLimit")||"Demasiadas solicitudes. Espera un momento antes de buscar de nuevo.":r.includes("API key")?i=d(this.language,"locationPicker.apiKeyError")||"Error: API key no configurada o inv\xE1lida. Verifica la configuraci\xF3n.":r&&(i=`${d(this.language,"locationPicker.error")||"Error"}: ${r}`),a.innerHTML=`<div style='padding: 20px; text-align: center; color: var(--text-error);'>${i}</div>`}}selectLocation(e){this.selectedLocation=e;let a=document.getElementById("location-selected-container"),t=document.getElementById("confirm-location-button"),r=document.getElementById("location-results-container");if(a&&t){a.style.display="block";let i=d(this.language,"locationPicker.saveFavorite")||"\u2B50 Guardar";a.innerHTML=`
        <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 10px;">
          <div style="flex: 1; min-width: 200px;">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
              <span style="font-size: 18px;">\u{1F4CD}</span>
              <strong style="word-wrap: break-word; font-size: 15px;">${e.name}</strong>
            </div>
            <small style="color: var(--text-muted); word-wrap: break-word; display: block; margin-bottom: 4px;">${e.address||""}</small>
            <small style="color: var(--text-muted); font-size: 10px;">Lat: ${e.latitude.toFixed(6)}, Lon: ${e.longitude.toFixed(6)}</small>
          </div>
          <button id="save-favorite-btn" class="mod-secondary" style="padding: 4px 8px; font-size: 12px; white-space: nowrap; flex-shrink: 0;">${i}</button>
        </div>
      `;let o=document.getElementById("save-favorite-btn");o&&o.addEventListener("click",async()=>{await this.saveAsFavorite(e),o.textContent=d(this.language,"locationPicker.saved")||"\u2713 Guardado",o.setAttribute("disabled","true")}),t.removeAttribute("disabled"),t.style.opacity="1",t.style.cursor="pointer"}r&&(r.style.display="none"),this.map&&this.updateMapMarker(e.latitude,e.longitude)}async saveAsFavorite(e){let a={name:e.name,latitude:e.latitude,longitude:e.longitude,radius:e.radius,address:e.address};if(!this.plugin.settings.savedLocations.some(r=>r.name===e.name&&r.latitude===e.latitude&&r.longitude===e.longitude)){this.plugin.settings.savedLocations.push(a),await this.plugin.saveSettings();let r=document.querySelector(".notelert-location-favorites-list");r&&this.renderFavorites(r)}}async deleteFavorite(e){let a=this.plugin.settings.savedLocations.findIndex(t=>t.name===e.name&&t.latitude===e.latitude&&t.longitude===e.longitude);a!==-1&&(this.plugin.settings.savedLocations.splice(a,1),await this.plugin.saveSettings(),this.plugin.log(`Ubicaci\xF3n favorita eliminada: ${e.name}`))}renderFavorites(e){e.innerHTML="";let a=this.plugin.settings.savedLocations||[];a.length===0?e.createEl("p",{text:d(this.language,"locationPicker.noFavorites")||"No hay ubicaciones guardadas",attr:{style:"color: var(--text-muted); font-size: 12px; padding: 10px; text-align: center;"}}):a.forEach((t,r)=>{let i=e.createEl("div",{cls:"notelert-location-favorite-item"});i.setAttribute("style","padding: 10px; margin: 5px 0; border: 1px solid var(--background-modifier-border); border-radius: 4px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: background 0.2s; flex-wrap: wrap; gap: 8px;"),i.addEventListener("mouseenter",()=>{i.style.background="var(--background-modifier-hover)"}),i.addEventListener("mouseleave",()=>{i.style.background=""});let o=i.createEl("div");o.setAttribute("style","flex: 1; min-width: 0; margin-right: 10px;"),o.createEl("div",{text:t.name,attr:{style:"font-weight: 500; margin-bottom: 4px; word-wrap: break-word;"}}),t.address&&o.createEl("div",{text:t.address.length>50?t.address.substring(0,50)+"...":t.address,attr:{style:"font-size: 11px; color: var(--text-muted); word-wrap: break-word;"}});let n=i.createEl("div");n.setAttribute("style","display: flex; gap: 6px; flex-shrink: 0;");let s=n.createEl("button",{text:d(this.language,"locationPicker.selectButton")||"Seleccionar",cls:"mod-secondary"});s.setAttribute("style","padding: 4px 12px; font-size: 12px; white-space: nowrap;"),s.addEventListener("click",c=>{c.stopPropagation(),this.selectLocation({name:t.name,latitude:t.latitude,longitude:t.longitude,radius:t.radius,address:t.address}),this.map&&this.updateMapMarker(t.latitude,t.longitude)});let u=n.createEl("button",{text:"\u{1F5D1}\uFE0F",title:d(this.language,"locationPicker.deleteButton")||"Eliminar"});u.setAttribute("style","padding: 4px 8px; font-size: 14px; background: var(--background-modifier-border); border: 1px solid var(--background-modifier-border); border-radius: 4px; cursor: pointer; color: var(--text-error);"),u.addEventListener("click",async c=>{c.stopPropagation(),await this.deleteFavorite(t),this.renderFavorites(e)})})}async createNotificationFromLocation(e,a,t,r){try{let i=`:#${e}`,o=this.editor.getLine(this.cursor.line),n=o.substring(0,this.cursor.ch-2),s=o.substring(this.cursor.ch),u=n+i+s;this.editor.setLine(this.cursor.line,u);let c={line:this.cursor.line,ch:n.length+i.length};this.editor.setCursor(c);let g={text:u.trim(),title:this.extractTitleFromText(u,i),message:u.trim(),date:new Date().toISOString().split("T")[0],time:"00:00",fullMatch:i,startIndex:0,endIndex:u.length,filePath:this.plugin.app.workspace.getActiveFile()?.path,lineNumber:this.cursor.line+1,location:e,latitude:a,longitude:t,radius:r};await this.plugin.createNotificationAndMarkProcessed(g),this.plugin.log(`Notificaci\xF3n de ubicaci\xF3n creada: ${g.title} en ${e}`)}catch(i){this.plugin.log(`Error creando notificaci\xF3n de ubicaci\xF3n: ${i}`),new I.Notice(d(this.language,"notices.errorCreatingNotification",{title:"Recordatorio de ubicaci\xF3n"}))}}extractTitleFromText(e,a){let t=e.replace(a,"").trim();return t=t.replace(/\s+/g," ").trim(),t.length>50&&(t=t.substring(0,47)+"..."),t||"Recordatorio de ubicaci\xF3n"}};var B=class extends x.PluginSettingTab{constructor(e,a){super(e,a);this.plugin=a}display(){let{containerEl:e}=this;e.empty();let a=!x.Platform.isMobile;e.createEl("h2",{text:d(this.plugin.settings.language,"settings.title")});let t=e.createEl("div",{attr:{style:`
          padding: 15px;
          margin-bottom: 20px;
          background: var(--background-secondary);
          border-radius: 8px;
          border-left: 4px solid var(--interactive-accent);
        `}});if(a?(t.createEl("h4",{text:"\u{1F4BB} Modo Desktop",attr:{style:"margin: 0 0 8px 0; font-size: 16px; font-weight: 600;"}}),t.createEl("p",{text:"En desktop, Notelert env\xEDa notificaciones por email. Las notificaciones de ubicaci\xF3n solo est\xE1n disponibles en m\xF3vil.",attr:{style:"margin: 0; color: var(--text-muted); font-size: 13px; line-height: 1.5;"}})):(t.createEl("h4",{text:"\u{1F4F1} Modo M\xF3vil",attr:{style:"margin: 0 0 8px 0; font-size: 16px; font-weight: 600;"}}),t.createEl("p",{text:"En m\xF3vil, Notelert usa la app para enviar notificaciones push y emails. Puedes configurar ubicaciones favoritas para recordatorios basados en ubicaci\xF3n.",attr:{style:"margin: 0; color: var(--text-muted); font-size: 13px; line-height: 1.5;"}})),e.createEl("h3",{text:"Configuraci\xF3n B\xE1sica"}),new x.Setting(e).setName(d(this.plugin.settings.language,"settings.language")).setDesc(d(this.plugin.settings.language,"settings.languageDesc")).addDropdown(r=>{J.forEach(i=>{r.addOption(i.code,`${i.nativeName} (${i.name})`)}),r.setValue(this.plugin.settings.language),r.onChange(async i=>{this.plugin.settings.language=i,await this.plugin.saveSettings(),this.display()})}),new x.Setting(e).setName(d(this.plugin.settings.language,"settings.debugMode")).setDesc(d(this.plugin.settings.language,"settings.debugModeDesc")).addToggle(r=>r.setValue(this.plugin.settings.debugMode).onChange(async i=>{this.plugin.settings.debugMode=i,await this.plugin.saveSettings()})),a){e.createEl("h3",{text:"\u{1F4BB} Configuraci\xF3n Desktop"}),new x.Setting(e).setName("Email del Usuario").setDesc("Email donde recibir\xE1s las notificaciones programadas").addText(o=>{o.setPlaceholder("usuario@email.com").setValue(this.plugin.settings.userEmail||"").onChange(async n=>{this.plugin.settings.userEmail=n,await this.plugin.saveSettings()})}),e.createEl("h4",{text:"\u{1F4E7} Emails Programados"});let r=e.createEl("p",{text:"Gestiona tus emails programados. Puedes cancelarlos antes de que se env\xEDen.",attr:{style:"color: var(--text-muted); font-size: 13px; margin-bottom: 15px;"}}),i=e.createEl("div",{attr:{style:`
            margin: 15px 0;
            padding: 15px;
            background: var(--background-secondary);
            border-radius: 8px;
            border: 1px solid var(--background-modifier-border);
          `}});this.renderScheduledEmails(i)}if(!a){e.createEl("h3",{text:"\u{1F4F1} Configuraci\xF3n M\xF3vil"}),e.createEl("h4",{text:"\u{1F4CD} Ubicaciones Guardadas"});let r=e.createEl("p",{text:"Gestiona tus ubicaciones favoritas. Estas aparecer\xE1n cuando selecciones 'Ubicaci\xF3n' al crear una notificaci\xF3n.",attr:{style:"color: var(--text-muted); font-size: 13px; margin-bottom: 15px;"}});new x.Setting(e).setName("A\xF1adir Nueva Ubicaci\xF3n").setDesc("Abre el selector de ubicaciones con mapa para a\xF1adir una nueva ubicaci\xF3n").addButton(o=>{o.setButtonText("\u2795 A\xF1adir Ubicaci\xF3n").setCta().onClick(()=>{this.openLocationPicker()})});let i=e.createEl("div",{attr:{style:`
            margin: 15px 0;
            padding: 15px;
            background: var(--background-secondary);
            border-radius: 8px;
            border: 1px solid var(--background-modifier-border);
          `}});this.renderSavedLocations(i)}}renderSavedLocations(e){e.empty();let a=this.plugin.settings.savedLocations||[];if(a.length===0){e.createEl("p",{text:"No hay ubicaciones guardadas. Haz clic en 'A\xF1adir Ubicaci\xF3n' para empezar.",attr:{style:"color: var(--text-muted); text-align: center; padding: 20px;"}});return}a.forEach((t,r)=>{let i=e.createEl("div",{attr:{style:`
            padding: 12px;
            margin: 8px 0;
            border: 1px solid var(--background-modifier-border);
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            background: var(--background-primary);
          `}}),o=i.createEl("div",{attr:{style:"flex: 1; min-width: 200px;"}});o.createEl("div",{text:t.name,attr:{style:"font-weight: 500; margin-bottom: 4px; font-size: 14px;"}}),t.address&&o.createEl("div",{text:t.address.length>60?t.address.substring(0,60)+"...":t.address,attr:{style:"font-size: 12px; color: var(--text-muted); margin-bottom: 4px; word-wrap: break-word;"}}),o.createEl("div",{text:`\u{1F4CD} ${t.latitude.toFixed(6)}, ${t.longitude.toFixed(6)}`,attr:{style:"font-size: 11px; color: var(--text-muted);"}});let n=i.createEl("div",{attr:{style:"display: flex; gap: 6px; flex-shrink: 0;"}});n.createEl("button",{text:"\u270F\uFE0F Editar",attr:{style:"padding: 6px 12px; font-size: 12px; white-space: nowrap;"}}).addEventListener("click",()=>{this.editLocation(t,r)}),n.createEl("button",{text:"\u{1F5D1}\uFE0F",attr:{style:"padding: 6px 10px; font-size: 14px; color: var(--text-error);"}}).addEventListener("click",async()=>{await this.deleteLocation(r),this.display()})})}renderScheduledEmails(e){e.empty();let a=this.plugin.settings.scheduledEmails||[];if(a.length===0){e.createEl("p",{text:"No hay emails programados. Los emails que programes aparecer\xE1n aqu\xED.",attr:{style:"color: var(--text-muted); text-align: center; padding: 20px;"}});return}[...a].sort((r,i)=>new Date(r.scheduledDate).getTime()-new Date(i.scheduledDate).getTime()).forEach((r,i)=>{let o=e.createEl("div",{attr:{style:`
            padding: 12px;
            margin: 8px 0;
            border: 1px solid var(--background-modifier-border);
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            background: var(--background-primary);
          `}}),n=o.createEl("div",{attr:{style:"flex: 1; min-width: 200px;"}});n.createEl("div",{text:r.title,attr:{style:"font-weight: 500; margin-bottom: 4px; font-size: 14px;"}}),r.message&&n.createEl("div",{text:r.message.length>60?r.message.substring(0,60)+"...":r.message,attr:{style:"font-size: 12px; color: var(--text-muted); margin-bottom: 4px; word-wrap: break-word;"}});let s=new Date(r.scheduledDate),u=new Date,c=s<u;n.createEl("div",{text:`\u{1F4C5} ${s.toLocaleString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})} ${c?"(Pasado)":""}`,attr:{style:`font-size: 11px; color: ${c?"var(--text-error)":"var(--text-muted)"};`}}),o.createEl("div",{attr:{style:"display: flex; gap: 6px; flex-shrink: 0;"}}).createEl("button",{text:"\u{1F5D1}\uFE0F Cancelar",attr:{style:"padding: 6px 12px; font-size: 12px; white-space: nowrap; color: var(--text-error);"}}).addEventListener("click",async()=>{let h=a.findIndex(f=>f.notificationId===r.notificationId);await this.cancelScheduledEmail(r,h)})})}async cancelScheduledEmail(e,a){let t=this.plugin.settings.notelertApiKey||k;if(!t){new x.Notice("\u274C API Key no configurada. Contacta al desarrollador del plugin.");return}let r=await Z(e.notificationId,t);r.success?(this.plugin.settings.scheduledEmails.splice(a,1),await this.plugin.saveSettings(),this.display(),new x.Notice("\u2705 Email cancelado correctamente")):new x.Notice(`\u274C Error: ${r.error||"Error al cancelar email"}`)}openLocationPicker(){new D(this.app,this.plugin,this.plugin.settings.language,async a=>{this.plugin.settings.savedLocations||(this.plugin.settings.savedLocations=[]),this.plugin.settings.savedLocations.push(a),await this.plugin.saveSettings(),this.display()}).open()}editLocation(e,a){new D(this.app,this.plugin,this.plugin.settings.language,async r=>{this.plugin.settings.savedLocations[a]=r,await this.plugin.saveSettings(),this.display()},e).open()}async deleteLocation(e){this.plugin.settings.savedLocations.splice(e,1),await this.plugin.saveSettings()}};var v=L(require("obsidian"));var F=class extends v.Modal{constructor(e,a,t,r,i,o,n){super(e);this.notificationType="time";this.selectedLocation=null;this.plugin=a,this.language=t,this.editor=r,this.cursor=i,this.originalText=o,this.onCancel=n}onOpen(){let{contentEl:e}=this;e.empty(),e.setAttribute("style",`
      min-width: 300px; 
      max-width: 600px; 
      width: 95vw;
      max-height: 90vh; 
      overflow: hidden;
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      margin: 0 auto;
    `);let a=e.createEl("div",{attr:{style:`
          flex: 1;
          overflow-y: auto;
          overflow-x: hidden;
          padding-right: 5px;
          margin-bottom: 10px;
        `}});a.createEl("h2",{text:d(this.language,"datePicker.title"),attr:{style:"margin: 0 0 15px 0; font-size: 18px; font-weight: 600;"}});let t=a.createEl("div",{cls:"notelert-datepicker-container"});t.setAttribute("style","margin: 0; width: 100%;");let r=!v.Platform.isMobile;r&&(this.notificationType="time");let i=t.createEl("div",{cls:"notelert-date-container"});i.setAttribute("style","margin-bottom: 15px;"),i.createEl("label",{text:d(this.language,"datePicker.dateLabel")}).setAttribute("style","display: block; margin-bottom: 5px; font-weight: 500;");let n=i.createEl("input",{type:"date",cls:"notelert-date-input"});n.setAttribute("style","width: 100%; padding: 10px; border: 1px solid var(--background-modifier-border); border-radius: 6px; box-sizing: border-box; font-size: 14px;");let s=t.createEl("div",{cls:"notelert-time-container"});s.setAttribute("style","margin-bottom: 20px;"),s.createEl("label",{text:d(this.language,"datePicker.timeLabel")}).setAttribute("style","display: block; margin-bottom: 5px; font-weight: 500;");let c=s.createEl("input",{type:"time",cls:"notelert-time-input"});c.setAttribute("style","width: 100%; padding: 10px; border: 1px solid var(--background-modifier-border); border-radius: 6px; box-sizing: border-box; font-size: 14px;");let g=t.createEl("div",{cls:"notelert-type-container"});g.setAttribute("style",`margin-bottom: 20px; padding: 15px; background: var(--background-secondary); border-radius: 6px; width: 100%; box-sizing: border-box; ${r?"display: none;":""}`);let p=g.createEl("label",{text:d(this.language,"datePicker.notificationType"),attr:{style:"display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px;"}}),h=g.createEl("div");h.setAttribute("style","display: flex; gap: 10px; flex-wrap: wrap; width: 100%;");let f=h.createEl("button",{text:"\u23F0 "+d(this.language,"datePicker.timeNotification"),cls:"mod-cta"});f.setAttribute("style","flex: 1; min-width: 120px; padding: 10px; font-size: 14px; white-space: nowrap;"),f.id="notification-type-time";let m=h.createEl("button",{text:"\u{1F4CD} "+d(this.language,"datePicker.locationNotification"),cls:"mod-secondary"});m.setAttribute("style","flex: 1; min-width: 120px; padding: 10px; font-size: 14px; white-space: nowrap;"),m.id="notification-type-location";let y=()=>{this.notificationType==="time"?(f.className="mod-cta",m.className="mod-secondary"):(f.className="mod-secondary",m.className="mod-cta")};f.addEventListener("click",()=>{this.notificationType="time",this.selectedLocation=null,y(),this.updateModalContent(t,n,c)}),m.addEventListener("click",()=>{this.notificationType="location",this.selectedLocation=null,y(),this.updateModalContent(t,n,c)}),y();let b=t.createEl("div",{cls:"notelert-quick-actions"});b.setAttribute("style","margin-bottom: 20px; width: 100%; box-sizing: border-box;"),b.id="quick-actions-container",b.createEl("p",{text:d(this.language,"datePicker.quickActions")}).setAttribute("style","margin-bottom: 10px; font-weight: 500;");let q=b.createEl("div");q.setAttribute("style","display: flex; gap: 8px; flex-wrap: wrap; width: 100%;"),[{label:d(this.language,"datePicker.today"),date:this.getToday(),time:"09:00"},{label:d(this.language,"datePicker.tomorrow"),date:this.getTomorrow(),time:"09:00"},{label:d(this.language,"datePicker.in1Hour"),date:this.getToday(),time:this.getTimeInHours(1)},{label:d(this.language,"datePicker.in2Hours"),date:this.getToday(),time:this.getTimeInHours(2)}].forEach(S=>{let w=q.createEl("button",{text:S.label,cls:"mod-secondary"});w.setAttribute("style","padding: 4px 8px; font-size: 12px;"),w.addEventListener("click",()=>{n.value=S.date,c.value=S.time})});let H=e.createEl("div",{cls:"notelert-datepicker-buttons"});H.setAttribute("style",`
      display: flex; 
      gap: 10px; 
      justify-content: flex-end; 
      margin-top: 10px; 
      flex-wrap: wrap;
      flex-shrink: 0;
      padding-top: 10px;
      border-top: 1px solid var(--background-modifier-border);
      width: 100%;
      box-sizing: border-box;
    `);let G=H.createEl("button",{text:d(this.language,"datePicker.cancelButton"),cls:"mod-secondary"});G.setAttribute("style","flex: 1; min-width: 120px; padding: 12px 20px; font-size: 14px; box-sizing: border-box;"),G.addEventListener("click",()=>{this.onCancel(),this.close()});let K=H.createEl("button",{text:d(this.language,"datePicker.confirmButton"),cls:"mod-cta"});K.setAttribute("style","flex: 1; min-width: 120px; padding: 12px 20px; font-size: 14px; box-sizing: border-box;"),K.addEventListener("click",async()=>{let S=w=>{let P=document.getElementById("datepicker-debug-info");if(P){let T=new Date().toLocaleTimeString(),C=P.innerHTML||"",M=w.includes("\u274C")||w.includes("Error")?"var(--text-error)":w.includes("\u2705")?"var(--text-success)":"var(--text-normal)";P.innerHTML=`${C}<div style="margin: 4px 0; padding: 4px 8px; font-size: 11px; color: ${M}; border-left: 3px solid ${M}; background: var(--background-secondary); border-radius: 3px; word-wrap: break-word; white-space: pre-wrap;"><span style="opacity: 0.7;">[${T}]</span> ${w}</div>`;let N=document.getElementById("datepicker-debug-container");N&&(N.scrollTop=N.scrollHeight)}};if(this.notificationType==="location"){if(!this.selectedLocation){new v.Notice(d(this.language,"datePicker.selectSavedLocation")||"Por favor, selecciona una ubicaci\xF3n");return}await this.createNotificationFromLocation(this.selectedLocation),this.close()}else{let w=n.value,P=c.value;if(w&&P){let T=`:@${w}, ${P}`,C=this.editor.getLine(this.cursor.line),M=C.substring(0,this.cursor.ch-2),N=C.substring(this.cursor.ch),_=M+T+N;this.editor.setLine(this.cursor.line,_);let ue={line:this.cursor.line,ch:M.length+T.length};this.editor.setCursor(ue),await this.createNotificationFromDatePicker(w,P,_),this.close()}else new v.Notice(d(this.language,"datePicker.selectDateTime"))}}),n.value=this.getToday(),c.value=this.getTimeInHours(1)}onClose(){let{contentEl:e}=this;e.empty()}getToday(){return new Date().toISOString().split("T")[0]}getTomorrow(){let e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}getTimeInHours(e){let a=new Date;return a.setHours(a.getHours()+e),a.toTimeString().slice(0,5)}async createNotificationFromDatePicker(e,a,t){try{let r=this.plugin.app.workspace.getActiveFile(),i=r?r.basename:"Nota",n=this.editor.getLine(this.cursor.line).replace(/:@[^,\s]+,\s*[^\s]+/g,"").trim(),s={text:t.trim(),title:i,message:n,date:e,time:a,fullMatch:`:@${e}, ${a}`,startIndex:0,endIndex:t.length,filePath:r?.path,lineNumber:this.cursor.line+1,type:"time"};await this.plugin.createNotificationAndMarkProcessed(s)}catch(r){this.plugin.log(`Error creando notificaci\xF3n desde date picker: ${r}`),new v.Notice(d(this.language,"notices.errorCreatingNotification",{title:"Recordatorio"}))}}extractTitleFromText(e,a){let t=e.replace(a,"").trim();return t=t.replace(/\s+/g," ").trim(),t.length>50&&(t=t.substring(0,47)+"..."),t||"Recordatorio"}updateModalContent(e,a,t){let r=e.querySelector(".notelert-date-container"),i=e.querySelector(".notelert-time-container"),o=e.querySelector("#quick-actions-container"),n=e.querySelector("#location-list-container");this.notificationType==="location"?(r&&(r.style.display="none"),i&&(i.style.display="none"),o&&(o.style.display="none"),n?n.style.display="block":this.renderLocationList(e)):(r&&(r.style.display="block"),i&&(i.style.display="block"),o&&(o.style.display="block"),n&&(n.style.display="none"))}renderLocationList(e){let a=e.querySelector("#location-list-container");a&&a.remove();let t=this.plugin.settings.savedLocations||[];if(t.length===0){let o=e.createEl("div",{attr:{style:`
            padding: 20px;
            text-align: center;
            color: var(--text-muted);
            background: var(--background-secondary);
            border-radius: 6px;
            margin: 15px 0;
          `}});o.id="location-list-container",o.textContent=d(this.language,"datePicker.noSavedLocations");return}let r=e.createEl("h3",{text:"Selecciona una ubicaci\xF3n:",attr:{style:`
          margin: 15px 0 10px 0;
          font-size: 16px;
          font-weight: 600;
          color: var(--text-normal);
          flex-shrink: 0;
        `}}),i=e.createEl("div",{attr:{style:`
          height: 400px;
          max-height: 400px;
          overflow-y: auto;
          overflow-x: hidden;
          padding: 10px;
          margin: 10px 0;
          background: var(--background-primary);
          border: 2px solid var(--interactive-accent);
          border-radius: 8px;
          box-sizing: border-box;
          flex-shrink: 0;
        `}});i.id="location-list-container",t.forEach((o,n)=>{let s=i.createEl("div",{attr:{style:`
            padding: 12px 15px;
            margin: 8px 0;
            border: 2px solid var(--background-modifier-border);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            background: var(--background-primary);
            width: 100%;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: space-between;
          `}});s.id=`location-item-${n}`;let u=o.name||`Ubicaci\xF3n ${n+1}`,c=s.createEl("div",{text:u,attr:{style:"font-weight: 500; font-size: 14px; flex: 1;"}}),g=s.createEl("div",{text:"\u2713",attr:{style:`
            font-size: 18px;
            color: var(--interactive-accent);
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.2s;
            margin-left: 10px;
          `}});g.id=`check-icon-${n}`,s.locationData=o,s.checkIcon=g;let p=()=>{t.forEach((h,f)=>{let m=document.getElementById(`location-item-${f}`),y=document.getElementById(`check-icon-${f}`);if(m&&y){let b=m.querySelector("div:first-child");m.style.background="var(--background-primary)",m.style.borderColor="var(--background-modifier-border)",b&&(b.style.color="var(--text-normal)"),y.style.opacity="0"}}),s.style.background="var(--interactive-accent)",s.style.borderColor="var(--interactive-accent)",c.style.color="var(--text-on-accent)",g.style.opacity="1",this.selectedLocation=o};s.addEventListener("click",p),s.addEventListener("mouseenter",()=>{this.selectedLocation!==o&&(s.style.background="var(--background-modifier-hover)",s.style.borderColor="var(--interactive-accent)")}),s.addEventListener("mouseleave",()=>{this.selectedLocation!==o&&(s.style.background="var(--background-primary)",s.style.borderColor="var(--background-modifier-border)")})})}async selectLocationFromSaved(){return new Promise(async e=>{try{let a=new v.Modal(this.app);a.titleEl.setText(d(this.language,"datePicker.selectSavedLocation"));let{contentEl:t}=a;t.empty(),t.setAttribute("style",`
          min-width: 300px; 
          max-width: 600px; 
          width: 95vw;
          max-height: 85vh; 
          overflow: hidden;
          padding: 20px;
          box-sizing: border-box;
          display: flex;
          flex-direction: column;
          margin: 0 auto;
        `);let r=a.modalEl;r&&(r.style.zIndex="10000",r.style.position="fixed");let i=t.createEl("div",{attr:{style:`
              margin-bottom: 15px;
              padding: 12px;
              background: var(--background-secondary);
              border: 2px solid var(--background-modifier-border);
              border-radius: 8px;
              font-size: 11px;
              height: 150px;
              min-height: 150px;
              max-height: 200px;
              overflow-y: auto;
              overflow-x: hidden;
              font-family: 'Courier New', monospace;
              box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
              flex-shrink: 0;
            `}});i.id="location-select-debug-container",i.innerHTML=`
          <div style="font-weight: 700; margin-bottom: 8px; color: var(--text-accent); font-size: 12px; border-bottom: 1px solid var(--background-modifier-border); padding-bottom: 6px;">
            \u{1F50D} Debug - Ubicaciones Guardadas
          </div>
          <div id="location-select-debug-info" style="color: var(--text-normal); line-height: 1.6; word-wrap: break-word; min-height: 100px;"></div>
        `;let o=c=>{let g=document.getElementById("location-select-debug-info");if(g){let p=new Date().toLocaleTimeString(),h=g.innerHTML||"",f=c.includes("\u274C")||c.includes("Error")?"var(--text-error)":c.includes("\u2705")?"var(--text-success)":"var(--text-normal)";g.innerHTML=`${h}<div style="margin: 4px 0; padding: 4px 8px; font-size: 11px; color: ${f}; border-left: 3px solid ${f}; background: var(--background-secondary); border-radius: 3px; word-wrap: break-word; white-space: pre-wrap;"><span style="opacity: 0.7;">[${p}]</span> ${c}</div>`;let m=document.getElementById("location-select-debug-container");m&&(m.scrollTop=m.scrollHeight)}};o("\u{1F50D} Iniciando b\xFAsqueda de ubicaciones guardadas..."),o("\u{1F4E5} Recargando settings..."),this.plugin.loadSettings?(await this.plugin.loadSettings(),o("\u2705 Settings recargados")):o("\u26A0\uFE0F loadSettings no disponible, usando settings actuales");let n=this.plugin.settings.savedLocations||[];if(o(`\u{1F4CA} Ubicaciones encontradas: ${n.length}`),o(`\u{1F4CB} Settings object: ${JSON.stringify(this.plugin.settings).substring(0,200)}...`),n.length>0?n.forEach((c,g)=>{o(`\u{1F4CD} [${g+1}] ${c.name||"Sin nombre"} - Lat: ${c.latitude}, Lon: ${c.longitude}`)}):(o("\u274C No se encontraron ubicaciones en savedLocations"),o(`\u{1F50D} Tipo de savedLocations: ${typeof this.plugin.settings.savedLocations}`),o(`\u{1F50D} savedLocations es null/undefined: ${this.plugin.settings.savedLocations===null||this.plugin.settings.savedLocations===void 0}`)),n.length===0){o("\u26A0\uFE0F No hay ubicaciones para mostrar"),new v.Notice(d(this.language,"datePicker.noSavedLocations")),a.open();return}let s=t.createEl("h3",{text:"Selecciona una ubicaci\xF3n:",attr:{style:`
            margin: 15px 0 10px 0;
            font-size: 18px;
            font-weight: 600;
            color: var(--text-normal);
            flex-shrink: 0;
            display: block !important;
            visibility: visible !important;
          `}}),u=t.createEl("div",{attr:{style:`
            flex: 1;
            min-height: 250px;
            max-height: 450px;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 15px;
            margin: 10px 0;
            background: var(--background-primary);
            border: 3px solid var(--interactive-accent);
            border-radius: 8px;
            box-sizing: border-box;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: relative;
            z-index: 100;
          `}});u.id="location-list-container",o("\u{1F3A8} Creando elementos de la lista..."),o("\u{1F4E6} Contenedor creado con ID: location-list-container"),o(`\u{1F4CF} Altura del contenedor: ${u.offsetHeight}px`),n.forEach((c,g)=>{o(`\u{1F4DD} Creando item ${g+1}: ${c.name||"Sin nombre"}`);let p=u.createEl("div",{attr:{style:`
              padding: 15px;
              margin: 10px 0;
              border: 2px solid var(--interactive-accent);
              border-radius: 6px;
              cursor: pointer;
              transition: all 0.2s;
              background: var(--background-primary);
              width: 100%;
              box-sizing: border-box;
              display: block !important;
              visibility: visible !important;
              opacity: 1 !important;
              position: relative;
              z-index: 10;
            `}});p.id=`location-item-${g}`,p.addEventListener("mouseenter",()=>{p.style.background="var(--background-modifier-hover)"}),p.addEventListener("mouseleave",()=>{p.style.background="var(--background-primary)"});let h=c.name||`Ubicaci\xF3n ${g+1}`;p.createEl("div",{text:h,attr:{style:"font-weight: 500; margin-bottom: 4px; font-size: 14px;"}}),c.address&&p.createEl("div",{text:c.address.length>60?c.address.substring(0,60)+"...":c.address,attr:{style:"font-size: 12px; color: var(--text-muted); margin-bottom: 4px; word-wrap: break-word;"}}),p.createEl("div",{text:`\u{1F4CD} ${c.latitude?.toFixed(6)||"0"}, ${c.longitude?.toFixed(6)||"0"}`,attr:{style:"font-size: 11px; color: var(--text-muted);"}}),p.addEventListener("click",()=>{o(`\u2705 Ubicaci\xF3n seleccionada: ${c.name}`),a.close(),e(c)}),o(`\u2705 Item ${g+1} creado con ID: location-item-${g}`)}),o(`\u2705 Lista creada con ${n.length} ubicaciones`),o(`\u{1F4CF} Altura final del contenedor: ${u.offsetHeight}px`),o(`\u{1F441}\uFE0F Elementos hijos del contenedor: ${u.children.length}`),setTimeout(()=>{let c=document.getElementById("location-list-container");c&&(o("\u{1F50D} Verificando contenedor despu\xE9s de renderizado..."),o(`  - display: ${window.getComputedStyle(c).display}`),o(`  - visibility: ${window.getComputedStyle(c).visibility}`),o(`  - opacity: ${window.getComputedStyle(c).opacity}`),o(`  - height: ${window.getComputedStyle(c).height}`),o(`  - overflow: ${window.getComputedStyle(c).overflow}`))},100),a.open()}catch(a){this.plugin.log(`Error cargando settings: ${a}`),new v.Notice("Error cargando ubicaciones guardadas"),e(null)}})}async createNotificationFromLocation(e){try{let a=`:#${e.name}`,t=this.editor.getLine(this.cursor.line),r=t.substring(0,this.cursor.ch-2),i=t.substring(this.cursor.ch),o=r+a+i;this.editor.setLine(this.cursor.line,o);let n={line:this.cursor.line,ch:r.length+a.length};this.editor.setCursor(n);let s=this.plugin.app.workspace.getActiveFile(),u=s?s.basename:"Nota",g=this.editor.getLine(this.cursor.line).replace(/:#[^\s]+/g,"").trim(),p={text:o.trim(),title:u,message:g,date:new Date().toISOString().split("T")[0],time:"00:00",fullMatch:a,startIndex:0,endIndex:o.length,filePath:s?.path,lineNumber:this.cursor.line+1,location:e.name,latitude:e.latitude,longitude:e.longitude,radius:e.radius,type:"location"};await this.plugin.createNotificationAndMarkProcessed(p),this.plugin.log(`Notificaci\xF3n de ubicaci\xF3n creada: ${p.title} en ${e.name}`)}catch(a){this.plugin.log(`Error creando notificaci\xF3n de ubicaci\xF3n: ${a}`),new v.Notice(d(this.language,"notices.errorCreatingNotification",{title:"Recordatorio de ubicaci\xF3n"}))}}addVisualFeedback(e,a){try{let t=a.match(/:@([^,]+),\s*([^\s]+)/);if(t){let r=t[1],i=t[2],o=`\u23F0${r}, ${i}`,n=`==${o}==`,s=e.replace(a,n);this.editor.setLine(this.cursor.line,s),this.plugin.log(`Feedback visual a\xF1adido: solo ${o} resaltado`)}}catch(t){this.plugin.log(`Error a\xF1adiendo feedback visual: ${t}`)}}};function ce(l,e,a){if(!a.settings.enableDatePicker||!a.settings.useNewSyntax)return;let t=l.getCursor(),i=l.getLine(t.line).substring(0,t.ch);if(i.endsWith(":@")){a.log("Detectado :@ - abriendo date picker"),se(l,t,a);return}i.endsWith(":#")&&(a.log("Detectado :# - abriendo date picker"),se(l,t,a))}function se(l,e,a){let r=l.getLine(e.line);new F(a.app,a,a.settings.language,l,e,r,()=>{a.log("Date picker cancelado")}).open()}var E=L(require("obsidian"));function le(l,e){let a=encodeURIComponent(l.title),t=l.message;t=t.replace(/:@[^,\s]+,\s*[^\s]+/g,""),t=t.replace(/:#[^\s]+/g,""),t=t.trim().replace(/\s+/g," ");let r=encodeURIComponent(t),i=l.date,o=l.time,n=l.type||(l.location?"location":"time"),s="";l.location&&(s=`&location=${encodeURIComponent(l.location)}`,l.latitude!==void 0&&l.longitude!==void 0&&(s+=`&latitude=${l.latitude}&longitude=${l.longitude}`),l.radius!==void 0&&(s+=`&radius=${l.radius}`));let u="";if(l.filePath&&l.lineNumber){let c=`obsidian://open?vault=${encodeURIComponent(e.vault.getName())}&file=${encodeURIComponent(l.filePath)}&line=${l.lineNumber}`;u=`&returnLink=${encodeURIComponent(c)}`}return`notelert://add?title=${a}&message=${r}&date=${i}&time=${o}&type=${n}${s}${u}`}async function R(l,e,a,t,r){try{if(!E.Platform.isMobile){let o=a.notelertApiKey||k;if(!a.userEmail){new E.Notice(d(a.language,"notices.desktopConfigRequired")||"\u274C Configura tu email en Settings para usar Notelert en desktop");return}if(!o){new E.Notice("\u274C API Key no configurada. Contacta al desarrollador del plugin.");return}if(l.type==="location"){new E.Notice(d(a.language,"notices.locationNotSupportedDesktop")||"\u274C Las notificaciones de ubicaci\xF3n solo est\xE1n disponibles en m\xF3vil");return}let n=`${l.date}T${l.time}:00`,s=new Date(n);if(isNaN(s.getTime())){new E.Notice(`\u274C Fecha inv\xE1lida: ${n}`),t(`Error: Fecha inv\xE1lida - ${n}`);return}let u=ee();t("Programando email para desktop:"),t(`  - T\xEDtulo: ${l.title}`),t(`  - Mensaje: ${l.message}`),t(`  - Email: ${a.userEmail}`),t(`  - Fecha: ${s.toISOString()}`),t(`  - Notification ID: ${u}`);let c=await Y(a.userEmail,l.title,l.message,s,u,o);if(c.success&&c.notificationId){let g={notificationId:c.notificationId,title:l.title,message:l.message,scheduledDate:s.toISOString(),createdAt:new Date().toISOString()};r&&r(g),new E.Notice(d(a.language,"notices.emailScheduled")||"\u2705 Email programado correctamente"),t(`Email programado: ${c.notificationId}`)}else new E.Notice(`\u274C ${c.error||"Error al programar email"}`),t(`Error programando email: ${c.error}`)}else{let o=le(l,e);t(`Ejecutando deeplink: ${o}`),typeof window!="undefined"&&(window.location.href=o)}}catch(i){t(`Error creando notificaci\xF3n: ${i}`),new E.Notice(d(a.language,"notices.errorCreatingNotification",{title:l.title}))}}var U=class extends de.Plugin{async onload(){console.log("Cargando plugin Notelert..."),await this.loadSettings(),this.addSettingTab(new B(this.app,this)),this.addStatusBarItem().setText("Notelert: Activo"),this.settings.enableDatePicker&&this.registerEvent(this.app.workspace.on("editor-change",(e,a)=>{ce(e,a,this)})),console.log("Plugin Notelert cargado correctamente")}onunload(){console.log("Descargando plugin Notelert...")}async loadSettings(){this.settings=Object.assign({},V,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async createNotificationInternal(e){await R(e,this.app,this.settings,a=>this.log(a),async a=>{this.settings.scheduledEmails||(this.settings.scheduledEmails=[]),this.settings.scheduledEmails.push(a),await this.saveSettings()})}async createNotificationAndMarkProcessed(e){try{await this.createNotificationInternal(e)}catch(a){this.log(`Error procesando notificaci\xF3n confirmada: ${a}`)}}log(e){this.settings.debugMode&&console.log(`[Notelert] ${e}`)}},we=U;
